import{m as g,c as m,k as ie,d as le,u as z,o as V,a as ce,b as de,e as Q,i as h,f as t,I as ue,A as Z,F as L,S as J,g as pe,h as me,j as I,l as he,t as ge,n as P,s as k,p as fe,q as ve,r as ye,v as we,w as xe,x as be,y as _e,z as Pe,R as v,N as Ce,B as Se,C as x,D as $e,E as Te,G as De,H as Ne,J as Le,K as Ie}from"./vendor-a821092a.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(a){if(a.ep)return;a.ep=!0;const r=i(a);fetch(a.href,r)}})();const Ee="modulepreload",Oe=function(e,o){return new URL(e,o).href},U={},b=function(o,i,u){if(!i||i.length===0)return o();const a=document.getElementsByTagName("link");return Promise.all(i.map(r=>{if(r=Oe(r,u),r in U)return;U[r]=!0;const d=r.endsWith(".css"),y=d?'[rel="stylesheet"]':"";if(!!u)for(let c=a.length-1;c>=0;c--){const l=a[c];if(l.href===r&&(!d||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${y}`))return;const n=document.createElement("link");if(n.rel=d?"stylesheet":Ee,d||(n.as="script",n.crossOrigin=""),n.href=r,document.head.appendChild(n),d)return new Promise((c,l)=>{n.addEventListener("load",c),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>o()).catch(r=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r})};var p=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Proxyprovider="/proxyprovider",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e))(p||{}),W=(e=>(e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.Source="source",e.Destination="destination",e))(W||{}),ke=(e=>(e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(ke||{}),X=(e=>(e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(X||{}),_=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(_||{});const Re=Object.values(W),_t={...Object.fromEntries(Re.map(e=>[e,!0])),ID:!1},Be=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],[E,Me]=g(m(""),{name:"selectedEndpoint",storage:localStorage}),[Fe,Pt]=g(m([]),{name:"endpointList",storage:localStorage}),[Ue,O]=g(m("halloween"),{name:"theme",storage:localStorage}),R=()=>Fe().find(({id:e})=>e===E()),Ct=()=>{var e;return(e=R())==null?void 0:e.secret},St=()=>{var e;return(e=R())==null?void 0:e.url.replace("http","ws")},je=()=>{const e=R();return ie.create({prefixUrl:e==null?void 0:e.url,headers:{Authorization:e!=null&&e.secret?`Bearer ${e.secret}`:""}})},[$t,Tt]=g(m(X.BAR),{name:"proxiesPreviewType",storage:localStorage}),[Ae,Dt]=g(m("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),[Ge,Nt]=g(m(!1),{name:"autoCloseConns",storage:localStorage}),[He,Lt]=g(m(!1),{name:"autoSwitchTheme",storage:localStorage}),[qe,It]=g(m("light"),{name:"favDayTheme",storage:localStorage}),[ze,Et]=g(m("night"),{name:"favNightTheme",storage:localStorage}),Y=e=>{He()&&O(e?ze():qe())};function Ve(){Y(window.matchMedia("(prefers-color-scheme: dark)").matches)}function Qe(){Ve(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{Y(e.matches)})}const[j,A]=m([]),[G,Ze]=m([]),[N,H]=m({}),[q,Je]=m({});function We(){const e=je(),o=s=>{s.forEach(n=>{var l;const c=((l=n.history.at(-1))==null?void 0:l.delay)??0;Je({...q(),[n.name]:{udp:n.udp,type:n.type,name:n.name}}),H({...N(),[n.name]:c})})},i=async()=>{const{providers:s}=await e.get("providers/proxies").json();Object.values(s).forEach(l=>{o(l.proxies)}),Ze(Object.values(s).filter(l=>l.name!=="default"&&l.vehicleType!=="Compatible"));const{proxies:n}=await e.get("proxies").json(),c=[...n.GLOBAL.all??[],"GLOBAL"];o(Object.values(n)),A(Object.values(n).filter(l=>{var f;return(f=l.all)==null?void 0:f.length}).sort((l,f)=>c.indexOf(l.name)-c.indexOf(f.name)))};return{proxies:j,proxyProviders:G,delayTestByProxyGroupName:async s=>{const n=await e.get(`group/${s}/delay`,{searchParams:{url:Ae(),timeout:2e3}}).json();H({...N(),...n})},delayMap:N,proxyNodeMap:q,updateProxy:i,setProxyGroupByProxyName:async(s,n)=>{const c=j().slice(),l=c.find(f=>f.name===s.name);Ge()&&e.delete("connections"),await e.put(`proxies/${s.name}`,{body:JSON.stringify({name:n})}),l.now=n,A(c)},updateProviderByProviderName:async s=>{try{await e.put(`providers/proxies/${s}`)}catch{}await i()},updateAllProvider:async()=>{await Promise.all(G().map(s=>e.put(`providers/proxies/${s.name}`))),await i()},healthCheckByProviderName:async s=>{await e.get(`providers/proxies/${s}/healthcheck`,{timeout:30*1e3}),await i()}}}const Xe=P('<li class="tooltip tooltip-bottom">'),Ye=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-box gap-2 bg-base-300 p-2 shadow">'),Ke=P('<li class="btn btn-xs">'),et=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal gap-2">'),tt=P('<ul class="navbar rounded-box sticky inset-x-0 top-2 z-10 mx-2 mt-2 flex w-auto items-center justify-center bg-base-300 px-4"><div class="navbar-start gap-4"><div><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-box min-h-full w-2/5 gap-2 bg-base-300 pt-20 shadow"></ul></div></div><a class="text-xl font-bold normal-case" href="https://github.com/metacubex/metacubexd" target="_blank">metacubexd</a></div><div class="navbar-end"><div class="flex items-center gap-2"><button class="btn btn-circle btn-sm"></button><button class="btn btn-circle btn-secondary btn-sm">'),ot=P("<li>"),rt=({href:e,tooltip:o,children:i})=>(()=>{const u=Xe();return k(u,"data-tip",o),h(u,t(Z,{class:"rounded-box",href:e,children:i})),u})(),nt=()=>(()=>{const e=Ye(),o=e.firstChild,i=o.nextSibling,u=i.firstChild,a=i.nextSibling,r=a.firstChild,d=r.nextSibling;return h(u,t(fe,{})),h(d,t(L,{each:Be,children:y=>(()=>{const s=Ke();return s.$$click=()=>O(y),k(s,"data-theme",y),h(s,y),s})()})),e})(),at=()=>{const[e,{locale:o}]=z(),{updateProxy:i,proxyProviders:u}=We();V(()=>{i()});const a=ce(()=>{const c=[{href:p.Overview,name:e("overview"),icon:t(ve,{})},{href:p.Proxies,name:e("proxies"),icon:t(ye,{})},{href:p.Rules,name:e("rules"),icon:t(we,{})},{href:p.Conns,name:e("connections"),icon:t(xe,{})},{href:p.Log,name:e("logs"),icon:t(be,{})},{href:p.Config,name:e("config"),icon:t(_e,{})}];return u().length>0&&c.splice(2,0,{href:p.Proxyprovider,name:e("proxyProviders"),icon:t(Pe,{})}),c}),r=de(),d=Q(),[y,s]=m(!1),n=()=>{Me(""),d("/setup")};return(()=>{const c=tt(),l=c.firstChild,f=l.firstChild,S=f.firstChild,B=S.nextSibling,te=B.firstChild,oe=B.nextSibling,re=oe.firstChild,ne=re.nextSibling,M=l.nextSibling,F=M.firstChild,$=F.firstChild,T=$.nextSibling;return S.addEventListener("change",w=>s(w.target.checked)),h(te,t(ue,{})),h(ne,t(L,{get each(){return a()},children:({href:w,name:D})=>(()=>{const C=ot();return C.$$click=()=>s(!1),h(C,t(Z,{href:w,children:D})),C})()})),h(c,t(J,{get when(){return r.pathname!=="/setup"},get children(){const w=et(),D=w.firstChild;return h(D,t(L,{get each(){return a()},children:({href:C,name:ae,icon:se})=>t(rt,{href:C,tooltip:ae,children:se})})),w}}),M),$.$$click=()=>{const w=o();o(w===_.EN?_.ZH:_.EN)},h($,t(pe,{})),h(F,t(nt,{}),T),T.$$click=n,h(T,t(me,{})),I(()=>he(f,ge("drawer w-auto lg:hidden",""))),I(()=>S.checked=y()),c})()};le(["click"]);const st=P('<div class="relative flex h-screen flex-col subpixel-antialiased"><div class="flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4">'),it=x(()=>b(()=>import("./Setup-8420b300.js"),["./Setup-8420b300.js","./vendor-a821092a.js","./index-23343ee3.js"],import.meta.url)),lt=x(()=>b(()=>import("./Overview-e72f0003.js"),["./Overview-e72f0003.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-ac54fc13.js"],import.meta.url)),ct=x(()=>b(()=>import("./Connections-644076ca.js"),["./Connections-644076ca.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-6c81a447.js","./index-ac54fc13.js"],import.meta.url)),dt=x(()=>b(()=>import("./Logs-81926c7c.js"),["./Logs-81926c7c.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-6c81a447.js"],import.meta.url)),ut=x(()=>b(()=>import("./Proxies-f5c132d9.js"),["./Proxies-f5c132d9.js","./vendor-a821092a.js","./ProxyNodePreview-f8a256c1.js","./index-d4e52c73.js"],import.meta.url)),pt=x(()=>b(()=>import("./ProxyProvider-e0232f8a.js"),["./ProxyProvider-e0232f8a.js","./vendor-a821092a.js","./ProxyNodePreview-f8a256c1.js","./index-d4e52c73.js","./index-ac54fc13.js","./proxies-c53981d7.js"],import.meta.url)),mt=x(()=>b(()=>import("./Rules-20595af9.js"),["./Rules-20595af9.js","./vendor-a821092a.js","./index-d4e52c73.js","./proxies-c53981d7.js"],import.meta.url)),ht=x(()=>b(()=>import("./Config-5a1e1b36.js"),["./Config-5a1e1b36.js","./vendor-a821092a.js","./index-23343ee3.js"],import.meta.url)),gt=()=>{const e=Q();return Qe(),V(async()=>{E()||e("/setup")}),(()=>{const o=st(),i=o.firstChild;return h(o,t(at,{}),i),h(i,t(Se,{get children(){return[t(J,{get when(){return E()},get children(){return[t(v,{get path(){return p.Overview},component:lt}),t(v,{get path(){return p.Proxies},component:ut}),t(v,{get path(){return p.Proxyprovider},component:pt}),t(v,{get path(){return p.Rules},component:mt}),t(v,{get path(){return p.Conns},component:ct}),t(v,{get path(){return p.Log},component:dt}),t(v,{get path(){return p.Config},component:ht}),t(v,{path:"*",get element(){return t(Ce,{get href(){return p.Overview}})}})]}}),t(v,{path:"/setup",component:it})]}})),I(()=>k(o,"data-theme",Ue())),o})()},ft={add:"Add",overview:"Overview",proxies:"Proxies",rules:"Rules",connections:"Connections",logs:"Logs",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",chains:"Chains",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",source:"Source",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",proxiesPreviewType:"Proxies preview type",urlForDelayTest:"Url for delay test",autoCloseConns:"Automatically close all connections",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme"},vt={add:"添加",overview:"概览",proxies:"代理",rules:"规则",connections:"连接",logs:"日志",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",chains:"链路",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",source:"源地址",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",proxiesPreviewType:"节点组预览样式",urlForDelayTest:"测速链接",autoCloseConns:"切换代理时自动断开全部连接",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好"},K={[_.EN]:ft,[_.ZH]:vt},ee=()=>{const[e,o]=g(m(Reflect.has(K,navigator.language)?navigator.language:_.EN),{name:"lang",storage:localStorage});return{lang:e,setLang:o}},yt=e=>{const{setLang:o}=ee(),[i,{locale:u}]=z();return De(()=>{o(u())}),e.children},wt=e=>{const{lang:o}=ee(),i=$e(K,o());return t(Te.Provider,{value:i,get children(){return t(yt,{get children(){return e.children}})}})},xt=document.getElementById("root");Ne(()=>t(wt,{get children(){return t(Le,{get source(){return Ie()},get children(){return t(gt,{})}})}}),xt);export{W as A,ke as D,X as P,Me as a,Ct as b,_t as c,We as d,Fe as e,Lt as f,Ve as g,He as h,Re as i,It as j,qe as k,Et as l,ze as m,Tt as n,Nt as o,$t as p,Dt as q,Ge as r,Pt as s,Be as t,je as u,Ae as v,St as w};
