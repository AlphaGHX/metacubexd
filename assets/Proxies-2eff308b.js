import{c as v,o as N,i as t,b,F as h,q as M,P as j,t as m,d as D}from"./vendor-0eff7de0.js";import{u as F}from"./index-b12fdd7e.js";import{t as S}from"./tw-merge-1166cefb.js";function R(){const g=F(),[x,_]=v([]),[y,P]=v([]),[u,C]=v({}),f=async()=>{const{providers:c}=await g.get("providers/proxies").json(),n=u();Object.values(c).forEach(e=>{e.proxies.forEach(r=>{var p;n[r.name]=(p=r.history[r.history.length-1])==null?void 0:p.delay})}),C(n),P(Object.values(c).filter(e=>e.name!=="default"&&e.vehicleType!=="Compatible"));const{proxies:s}=await g.get("proxies").json();_(Object.values(s).filter(e=>e.all&&e.all.length>0))};return{proxies:x,proxyProviders:y,delayMap:u,updateProxy:f,setProxiesByProxyName:async(c,n)=>{await g.put(`proxies/${c.name}`,{body:JSON.stringify({name:n})}),await f()}}}const T=m("<span>ms"),J=m('<div class="flex flex-col gap-4"><div><h1 class="pb-4 text-lg font-semibold">Proxies</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-1"></div></div><div><h1 class="pb-4 text-lg font-semibold">Proxy Providers</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-1">'),z=m('<div><div class="collapse-title text-xl font-medium"> </div><div class="collapse-content grid grid-cols-1 gap-2 sm:grid-cols-3 lg:grid-cols-5">'),A=m("<div> "),G=m('<div><div class="collapse-title text-xl font-medium"></div><div class="collapse-content grid grid-cols-1 gap-2 sm:grid-cols-3 lg:grid-cols-5">'),H=m('<div class="card card-bordered card-compact m-1 flex-row justify-between border-secondary p-4"> '),Q=()=>{const{proxies:g,proxyProviders:x,delayMap:_,updateProxy:y,setProxiesByProxyName:P}=R(),[u,C]=v({}),f=s=>{const e=_()[s];return typeof e!="number"||e===0?"":(()=>{const r=T(),p=r.firstChild;return t(r,e,p),r})()};N(async()=>{await y()});const k=async(s,e)=>{P(s,e)},c=s=>{const e=u();e[s]=!e[s],C({...e})},n=s=>u()[s]?"collapse-open":"collapse-close";return(()=>{const s=J(),e=s.firstChild,r=e.firstChild,p=r.nextSibling,E=e.nextSibling,O=E.firstChild,q=O.nextSibling;return t(p,b(h,{get each(){return g()},children:l=>(()=>{const d=z(),a=d.firstChild,w=a.firstChild,$=a.nextSibling;return a.$$click=()=>c(l.name),t(a,()=>l.name,w),t(a,()=>l.type,null),t($,b(h,{get each(){return l.all},children:i=>(()=>{const o=A(),B=o.firstChild;return o.$$click=()=>k(l,i),t(o,i,B),t(o,()=>f(i),null),M(()=>j(o,S(l.now===i?"border-primary bg-success-content text-success":"border-secondary","card card-bordered card-compact m-1 cursor-pointer flex-row justify-between p-4"))),o})()})),M(()=>j(d,S(n(l.name),"collapse collapse-arrow border-secondary bg-base-200 p-4"))),d})()})),t(q,b(h,{get each(){return x()},children:l=>(()=>{const d=G(),a=d.firstChild,w=a.nextSibling;return a.$$click=()=>c(l.name),t(a,()=>l.name),t(w,b(h,{get each(){return l.proxies},children:$=>(()=>{const i=H(),o=i.firstChild;return t(i,()=>$.name,o),t(i,()=>f($.name),null),i})()})),M(()=>j(d,S(n(l.name),"collapse-arrow collapse border-secondary bg-base-200 p-4"))),d})()})),s})()};D(["click"]);export{Q as default};
