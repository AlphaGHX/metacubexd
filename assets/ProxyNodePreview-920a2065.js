import{b as a,i as g,g as u,S as _,l as C,t as b,n as y,d as L,o as $,c as M,a as R,s as W,F as A}from"./vendor-01afc7ba.js";import{r as H,d as P,D as m,p as O,P as p}from"./index-ccde4305.js";import{I as F}from"./proxies-84eeffd0.js";const U=$('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>'),B=e=>{const{title:s,content:l,onCollapse:n}=e,r=()=>{const c="collapse-open",t="collapse-close";return e.isOpen?c:t},o=()=>{const c="opacity-100",t="opacity-0";return e.isOpen?c:t},v=a(()=>H()?"lg:grid-cols-3 xl:grid-cols-4":"sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7");return(()=>{const c=U(),t=c.firstChild,h=t.nextSibling;return t.$$click=()=>n(!e.isOpen),g(t,s),g(h,u(_,{get when(){return e.isOpen},children:l})),C(d=>{const f=b(r(),"collapse collapse-arrow mb-2 select-none overflow-visible border-secondary bg-base-200"),i=b(o(),v(),"collapse-content grid auto-rows-min grid-cols-2 gap-2 transition-opacity duration-1000");return f!==d._v$&&y(c,d._v$=f),i!==d._v$2&&y(h,d._v$2=i),d},{_v$:void 0,_v$2:void 0}),c})()},ie=B;L(["click"]);const Y=$('<div class="ml-2 flex flex-1 flex-col">'),j=$('<div class="flex"><div class="flex flex-1 flex-col">'),[z,k]=M(0);var I;k((I=document==null?void 0:document.body)==null?void 0:I.clientWidth);window.addEventListener("resize",()=>{k(document.body.clientWidth)});const Q=e=>{const s=a(()=>z()>=640&&H()),l=a(()=>e.subChild.filter((r,o)=>o%2===0||!s())),n=a(()=>e.subChild.filter((r,o)=>o%2===1));return(()=>{const r=j(),o=r.firstChild;return g(o,l),g(r,u(_,{get when(){return s()},get children(){const v=Y();return g(v,n),v}}),null),r})()},ce=Q,V=$("<span>ms"),X=e=>{const{delayMap:s}=P(),[l,n]=M(""),r=a(()=>s()[e.name]);return R(()=>{n("text-success"),r()>m.HIGH?n("text-error"):r()>m.MEDIUM&&n("text-warning")}),u(_,{get when(){return a(()=>typeof r()=="number")()&&r()!==m.NOT_CONNECTED},get children(){const o=V(),v=o.firstChild;return g(o,r,v),C(()=>y(o,l())),o}})},G=X,q=$('<div><div class="truncate text-left"></div><div class="flex items-center justify-between gap-1"><div></div><div class="text-xs">'),J=e=>{const{proxyName:s,isSelected:l,onClick:n}=e,{proxyNodeMap:r}=P(),o=a(()=>r()[s]),v=(c="")=>{const t=c.toLowerCase();return t.includes("shadowsocks")?t.replace("shadowsocks","ss"):t};return(()=>{const c=q(),t=c.firstChild,h=t.nextSibling,d=h.firstChild,f=d.nextSibling;return c.$$click=()=>n==null?void 0:n(),W(c,"data-tip",s),g(t,s),g(d,()=>{var i;return v((i=o())==null?void 0:i.type)},null),g(d,()=>{var i;return((i=o())==null?void 0:i.udp)&&" :: udp"},null),g(f,u(G,{get name(){return e.proxyName}})),C(i=>{const w=b("card card-bordered tooltip-bottom card-compact flex gap-1 border-neutral-focus bg-neutral p-3 text-neutral-content sm:tooltip",l&&"border-primary bg-primary-content text-primary",n&&"cursor-pointer"),N=b("truncate text-xs text-slate-500",l&&"text-primary");return w!==i._v$&&y(c,i._v$=w),N!==i._v$2&&y(d,i._v$2=N),i},{_v$:void 0,_v$2:void 0}),c})()};L(["click"]);const ae=e=>{const[s,l]=M(100),n=a(()=>e.proxies.slice(0,s()));return u(F,{get each(){return n()},get hasMore(){return n().length<e.proxies.length},next:()=>l(s()+30),children:r=>u(J,{proxyName:r,get isSelected(){return e.now===r},onClick:()=>{var o;(o=e.onClick)==null||o.call(e,r)}})})},K=$('<div class="flex h-6 w-full items-center"><div class="flex flex-1 overflow-hidden rounded-2xl"><div class="h-2 bg-success"></div><div class="h-2 bg-warning"></div><div class="h-2 bg-error"></div><div class="h-2 bg-neutral"></div></div><div class="ml-3 w-8 text-xs">'),Z=e=>{const{delayMap:s}=P(),l=a(()=>e.proxyNameList.map(t=>s()[t])),n=a(()=>l().length),r=a(()=>l().filter(t=>t>m.NOT_CONNECTED&&t<=m.MEDIUM).length),o=a(()=>l().filter(t=>t>m.MEDIUM&&t<=m.HIGH).length),v=a(()=>l().filter(t=>t>m.HIGH).length),c=a(()=>l().filter(t=>t===m.NOT_CONNECTED||typeof t!="number").length);return(()=>{const t=K(),h=t.firstChild,d=h.firstChild,f=d.nextSibling,i=f.nextSibling,w=i.nextSibling,N=h.nextSibling;return g(N,u(G,{get name(){return e.now}})),C(x=>{const E=`${r()*100/n()}%`,S=`${o()*100/n()}%`,D=`${v()*100/n()}%`,T=`${c()*100/n()}%`;return E!==x._v$&&((x._v$=E)!=null?d.style.setProperty("width",E):d.style.removeProperty("width")),S!==x._v$2&&((x._v$2=S)!=null?f.style.setProperty("width",S):f.style.removeProperty("width")),D!==x._v$3&&((x._v$3=D)!=null?i.style.setProperty("width",D):i.style.removeProperty("width")),T!==x._v$4&&((x._v$4=T)!=null?w.style.setProperty("width",T):w.style.removeProperty("width")),x},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),t})()},ee=$("<div>"),te=$('<div class="flex w-full flex-wrap items-center">'),re=e=>{let s=e.selected?"bg-white border-4 border-success":"bg-success";return typeof e.delay!="number"||e.delay===m.NOT_CONNECTED?s=e.selected?"bg-white border-4 border-neutral":"bg-neutral":e.delay>m.HIGH?s=e.selected?"bg-white border-4 border-error":"bg-error":e.delay>m.MEDIUM&&(s=e.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const l=ee();return C(()=>y(l,b("m-1 h-4 w-4 rounded-full",s))),l})()},ne=e=>{const{delayMap:s}=P();return(()=>{const l=te();return g(l,u(A,{get each(){return e.proxyNameList.map(n=>[n,s()[n]])},children:([n,r])=>{const o=e.now===n;return u(re,{delay:r,selected:o})}})),l})()},de=e=>{const s=a(()=>e.proxyNameList.length<=30),l=a(()=>{const r=O();return r===p.BAR||r===p.Auto&&!s()}),n=a(()=>{const r=O();return r===p.DOTS||r===p.Auto&&s()});return[u(_,{get when(){return l()},get children(){return u(Z,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}}),u(_,{get when(){return n()},get children(){return u(ne,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}})]};export{ie as C,ce as F,de as P,ae as a};
