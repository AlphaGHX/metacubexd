import{i as m,g as u,S as _,l as C,t as b,n as y,d as I,o as h,c as L,b as a,a as W,s as G,F as R}from"./vendor-01afc7ba.js";import{I as A}from"./index-02de5b64.js";import{d as P,D as v,p as T,P as p}from"./index-8a8a2bbe.js";const F=h('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>'),U=e=>{const{title:r,content:l,onCollapse:n}=e,t=()=>{const c="collapse-open",i="collapse-close";return e.isOpen?c:i},o=()=>{const c="opacity-100",i="opacity-0";return e.isOpen?c:i};return(()=>{const c=F(),i=c.firstChild,s=i.nextSibling;return i.$$click=()=>n(!e.isOpen),m(i,r),m(s,u(_,{get when(){return e.isOpen},children:l})),C(x=>{const g=b(t(),"collapse collapse-arrow mb-2 select-none overflow-visible border-secondary bg-base-200"),$=b(o(),"collapse-content grid auto-rows-min grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4");return g!==x._v$&&y(c,x._v$=g),$!==x._v$2&&y(s,x._v$2=$),x},{_v$:void 0,_v$2:void 0}),c})()},oe=U;I(["click"]);const B=h('<div class="ml-2 flex flex-1 flex-col">'),Y=h('<div class="flex"><div class="flex flex-1 flex-col">'),[j,H]=L(0);var O;H((O=document==null?void 0:document.body)==null?void 0:O.clientWidth);window.addEventListener("resize",()=>{H(document.body.clientWidth)});const z=e=>{const r=a(()=>j()>=640),l=a(()=>e.subChild.filter((t,o)=>o%2===0||!r())),n=a(()=>e.subChild.filter((t,o)=>o%2===1));return(()=>{const t=Y(),o=t.firstChild;return m(o,l),m(t,u(_,{get when(){return r()},get children(){const c=B();return m(c,n),c}}),null),t})()},ie=z,V=h("<span>ms"),X=e=>{const{delayMap:r}=P(),[l,n]=L(""),t=a(()=>r()[e.name]);return W(()=>{n("text-success"),t()>v.HIGH?n("text-error"):t()>v.MEDIUM&&n("text-warning")}),u(_,{get when(){return a(()=>typeof t()=="number")()&&t()!==v.NOT_CONNECTED},get children(){const o=V(),c=o.firstChild;return m(o,t,c),C(()=>y(o,l())),o}})},k=X,q=h('<div><div class="truncate text-left"></div><div class="flex items-center justify-between gap-1"><div></div><div class="text-xs">'),J=e=>{const{proxyName:r,isSelected:l,onClick:n}=e,{proxyNodeMap:t}=P(),o=a(()=>t()[r]),c=(i="")=>{const s=i.toLowerCase();return s.includes("shadowsocks")?s.replace("shadowsocks","ss"):s};return(()=>{const i=q(),s=i.firstChild,x=s.nextSibling,g=x.firstChild,$=g.nextSibling;return i.$$click=()=>n==null?void 0:n(),G(i,"data-tip",r),m(s,r),m(g,()=>{var d;return c((d=o())==null?void 0:d.type)},null),m(g,()=>{var d;return((d=o())==null?void 0:d.udp)&&" :: udp"},null),m($,u(k,{get name(){return e.proxyName}})),C(d=>{const w=b("card card-bordered tooltip-bottom card-compact flex gap-1 border-neutral-focus bg-neutral p-3 text-neutral-content sm:tooltip",l&&"border-primary bg-primary-content text-primary",n&&"cursor-pointer"),N=b("truncate text-xs text-slate-500",l&&"text-primary");return w!==d._v$&&y(i,d._v$=w),N!==d._v$2&&y(g,d._v$2=N),d},{_v$:void 0,_v$2:void 0}),i})()};I(["click"]);const ce=e=>{const[r,l]=L(100),n=a(()=>e.proxies.slice(0,r()));return u(A,{get each(){return n()},get hasMore(){return n().length<e.proxies.length},next:()=>l(r()+30),children:t=>u(J,{proxyName:t,get isSelected(){return e.now===t},onClick:()=>{var o;(o=e.onClick)==null||o.call(e,t)}})})},K=h('<div class="flex h-6 w-full items-center"><div class="flex flex-1 overflow-hidden rounded-2xl"><div class="h-2 bg-success"></div><div class="h-2 bg-warning"></div><div class="h-2 bg-error"></div><div class="h-2 bg-neutral"></div></div><div class="ml-3 w-8 text-xs">'),Q=e=>{const{delayMap:r}=P(),l=a(()=>e.proxyNameList.map(s=>r()[s])),n=a(()=>l().length),t=a(()=>l().filter(s=>s>v.NOT_CONNECTED&&s<=v.MEDIUM).length),o=a(()=>l().filter(s=>s>v.MEDIUM&&s<=v.HIGH).length),c=a(()=>l().filter(s=>s>v.HIGH).length),i=a(()=>l().filter(s=>s===v.NOT_CONNECTED||typeof s!="number").length);return(()=>{const s=K(),x=s.firstChild,g=x.firstChild,$=g.nextSibling,d=$.nextSibling,w=d.nextSibling,N=x.nextSibling;return m(N,u(k,{get name(){return e.now}})),C(f=>{const E=`${t()*100/n()}%`,S=`${o()*100/n()}%`,D=`${c()*100/n()}%`,M=`${i()*100/n()}%`;return E!==f._v$&&((f._v$=E)!=null?g.style.setProperty("width",E):g.style.removeProperty("width")),S!==f._v$2&&((f._v$2=S)!=null?$.style.setProperty("width",S):$.style.removeProperty("width")),D!==f._v$3&&((f._v$3=D)!=null?d.style.setProperty("width",D):d.style.removeProperty("width")),M!==f._v$4&&((f._v$4=M)!=null?w.style.setProperty("width",M):w.style.removeProperty("width")),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),s})()},Z=h("<div>"),ee=h('<div class="flex w-full flex-wrap items-center">'),te=e=>{let r=e.selected?"bg-white border-4 border-success":"bg-success";return typeof e.delay!="number"||e.delay===v.NOT_CONNECTED?r=e.selected?"bg-white border-4 border-neutral":"bg-neutral":e.delay>v.HIGH?r=e.selected?"bg-white border-4 border-error":"bg-error":e.delay>v.MEDIUM&&(r=e.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const l=Z();return C(()=>y(l,b("m-1 h-4 w-4 rounded-full",r))),l})()},ne=e=>{const{delayMap:r}=P();return(()=>{const l=ee();return m(l,u(R,{get each(){return e.proxyNameList.map(n=>[n,r()[n]])},children:([n,t])=>{const o=e.now===n;return u(te,{delay:t,selected:o})}})),l})()},ae=e=>{const r=a(()=>e.proxyNameList.length<=30),l=a(()=>{const t=T();return t===p.BAR||t===p.Auto&&!r()}),n=a(()=>{const t=T();return t===p.DOTS||t===p.Auto&&r()});return[u(_,{get when(){return l()},get children(){return u(Q,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}}),u(_,{get when(){return n()},get children(){return u(ne,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}})]};export{oe as C,ie as F,ae as P,ce as a};
