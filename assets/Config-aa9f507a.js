import{u as g,i as r,e as m,s as _,h as v,F as y,l as c,c as P,J as S,S as T,x as w,m as E}from"./vendor-f843f104.js";import{z as l,c as k,v as C}from"./index-60009942.js";import{P as R,u as F}from"./index-54d38cb8.js";const j=c('<div class="flex flex-col p-4">'),Q=c('<div class="flex flex-col"><form class="flex items-center gap-2"><input name="name" class="input input-bordered flex-1"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX</option></select><button type="submit" class="btn btn-primary">'),q=c('<div class="py-2">'),I=c('<div><form class="contents">'),A=c('<div class="form-control w-64 max-w-xs"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),D=c('<div class="flex flex-col gap-4"><div><div></div><div class="flex">'),M=c('<label class="flex items-center"><input class="radio m-4" type="radio" name="proxiesPreviewType">'),N=l.object({name:l.string(),type:l.string()}),L=()=>{const[p]=g(),o=F(),{form:n}=k({extend:C({schema:N}),onSubmit:async e=>{o.get("dns/query",{searchParams:{name:e.name,type:e.type}}).json().then(({Answer:t})=>d((t==null?void 0:t.map(({data:s})=>s))||[]))}}),[a,d]=P([]);return(()=>{const e=Q(),t=e.firstChild,s=t.firstChild,u=s.nextSibling,f=u.nextSibling;return S(n,t,()=>n),r(f,()=>p("dnsQuery")),r(e,m(T,{get when(){return a().length>0},get children(){const b=j();return r(b,m(y,{get each(){return a()},children:x=>(()=>{const i=q();return r(i,x),i})()})),b}}),null),e})()},O=l.object({port:l.number(),"socks-port":l.number(),"redir-port":l.number(),"tproxy-port":l.number(),"mixed-port":l.number()}),V=()=>{const p=F(),o=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:n,setInitialValues:a,reset:d}=k({extend:C({schema:O})});return w(async()=>{const e=await p.get("configs").json();a(e),d()}),(()=>{const e=I(),t=e.firstChild;return S(n,t,()=>n),r(t,m(y,{each:o,children:s=>(()=>{const u=A(),f=u.firstChild,b=f.firstChild,x=f.nextSibling;return r(b,()=>s.label),v(i=>{const $=s.key,h=s.label;return $!==i._v$&&_(x,"name",i._v$=$),h!==i._v$2&&_(x,"placeholder",i._v$2=h),i},{_v$:void 0,_v$2:void 0}),u})()})),e})()},[X,z]=E(P(R.BAR),{name:"proxiesPreviewType",storage:localStorage}),W=()=>{const[p]=g();return(()=>{const o=D(),n=o.firstChild,a=n.firstChild,d=a.nextSibling;return r(o,m(L,{}),n),r(o,m(V,{}),n),r(a,()=>p("proxiesPreviewType")),r(d,m(y,{get each(){return Object.values(R)},children:e=>(()=>{const t=M(),s=t.firstChild;return r(t,()=>p(e),s),s.addEventListener("change",()=>z(e)),_(s,"aria-label",e),v(()=>s.checked=e===X()),t})()})),o})()};export{W as default,X as proxiesPreviewType,z as setProxiesPreviewType};
