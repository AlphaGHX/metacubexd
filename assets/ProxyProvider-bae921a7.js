import{f as I,h,c as l,ag as B,S as C,i as d,j as D,b,F,l as A,t as H,d as k,G as R,u as U,ah as L,af as j}from"./vendor-a04c6957.js";import{P as G,m as M,n as p,i as O,o as $,L as Y,B as E,j as z,p as W,h as Q,k as V,F as X,l as T}from"./index-4624111a.js";const q=e=>{const[n,t]=I(100),r=h(()=>e.proxyNames.slice(0,n()));return l(B,{get each(){return r()},get hasMore(){return r().length<e.proxyNames.length},next:()=>t(n()+30),children:s=>l(G,{proxyName:s,get isSelected(){return e.now===s},onClick:()=>{var a;(a=e.onClick)==null||a.call(e,s)}})})},J=e=>{const n=()=>M()===p.OFF,t=h(()=>e.proxyNameList.length<=30),r=h(()=>{const a=M();return a===p.BAR||a===p.Auto&&!t()}),s=h(()=>{const a=M();return a===p.DOTS||a===p.Auto&&t()});return l(C,{get when(){return!n()},get children(){return[l(C,{get when(){return r()},get children(){return l(Z,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}}),l(C,{get when(){return s()},get children(){return l(re,{get proxyNameList(){return e.proxyNameList},get now(){return e.now}})}})]}})},K=b('<div class="flex h-6 w-full items-center gap-2"><div class="flex flex-1 overflow-hidden rounded-2xl"><div class="h-2 bg-success"></div><div class="h-2 bg-warning"></div><div class="h-2 bg-error"></div><div class="h-2 bg-neutral">'),Z=e=>{const{latencyMap:n}=O(),t=h(()=>e.proxyNameList.map(i=>n()[i])),r=h(()=>t().length),s=h(()=>t().filter(i=>i>$().NOT_CONNECTED&&i<=$().MEDIUM).length),a=h(()=>t().filter(i=>i>$().MEDIUM&&i<=$().HIGH).length),y=h(()=>t().filter(i=>i>$().HIGH).length),S=h(()=>t().filter(i=>i===$().NOT_CONNECTED).length);return(()=>{const i=K(),N=i.firstChild,_=N.firstChild,u=_.nextSibling,g=u.nextSibling,c=g.nextSibling;return d(i,l(Y,{get name(){return e.now}}),null),D(m=>{const f=`${s()*100/r()}%`,v=`${a()*100/r()}%`,o=`${y()*100/r()}%`,x=`${S()*100/r()}%`;return f!==m._v$&&((m._v$=f)!=null?_.style.setProperty("width",f):_.style.removeProperty("width")),v!==m._v$2&&((m._v$2=v)!=null?u.style.setProperty("width",v):u.style.removeProperty("width")),o!==m._v$3&&((m._v$3=o)!=null?g.style.setProperty("width",o):g.style.removeProperty("width")),x!==m._v$4&&((m._v$4=x)!=null?c.style.setProperty("width",x):c.style.removeProperty("width")),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),i})()},ee=b("<div>"),te=b('<div class="flex w-full flex-wrap items-center">'),ne=e=>{let n=e.selected?"bg-white border-4 border-success":"bg-success";return typeof e.latency!="number"||e.latency===$().NOT_CONNECTED?n=e.selected?"bg-white border-4 border-neutral":"bg-neutral":e.latency>$().HIGH?n=e.selected?"bg-white border-4 border-error":"bg-error":e.latency>$().MEDIUM&&(n=e.selected?"bg-white border-4 border-warning":"bg-warning"),(()=>{const t=ee();return D(()=>A(t,H("m-1 h-4 w-4 rounded-full",n))),t})()},re=e=>{const{latencyMap:n}=O();return(()=>{const t=te();return d(t,l(F,{get each(){return e.proxyNameList.map(r=>[r,n()[r]])},children:([r,s])=>{const a=e.now===r;return l(ne,{latency:s,selected:a})}})),t})()},le=b('<progress class="progress" max="100">'),se=b('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),ie=b('<div class="text-sm text-slate-500">Expire: <!> '),ae=e=>{const n=k(e.Total,{units:"iec"}),t=k(e.Download+e.Upload,{units:"iec"}),r=((e.Download+e.Upload)/e.Total*100).toFixed(2);return{total:n,used:t,percentage:r,expireStr:()=>e.Expire===0?"Null":R(e.Expire*1e3).format("YYYY-MM-DD")}},oe=e=>{if(!e.subscriptionInfo)return;const n=ae(e.subscriptionInfo);return[(()=>{const t=le();return D(()=>t.value=n.percentage),t})(),(()=>{const t=se(),r=t.firstChild,s=r.nextSibling,a=s.nextSibling,y=a.nextSibling;return y.nextSibling,d(t,()=>`${n.used}`,r),d(t,()=>`${n.total}`,s),d(t,()=>n.percentage,y),t})(),(()=>{const t=ie(),r=t.firstChild,s=r.nextSibling;return s.nextSibling,d(t,()=>n.expireStr(),s),t})()]},ce=b('<div class="flex flex-col gap-2"><h1 class="flex h-8 items-center pb-2 text-lg font-semibold">'),de=b('<div class="mr-8 flex items-center justify-between"><span></span><div>'),ue=b('<div class="text-sm text-slate-500"> :: <!> '),me=()=>{const[e]=U(),{proxyProviders:n,updateProviderByProviderName:t,updateAllProvider:r,healthCheckByProviderName:s,latencyMap:a}=O(),[y,S]=I({}),i=(u,g)=>{T(u,s.bind(null,g),"animate-pulse")},N=(u,g)=>{T(u,t.bind(null,g))},_=u=>{T(u,r)};return(()=>{const u=ce(),g=u.firstChild;return d(g,()=>e("proxyProviders"),null),d(g,l(E,{class:"btn-circle btn-ghost btn-sm ml-2",onClick:c=>_(c),get children(){return l(L,{})}}),null),d(u,l(X,{get subChild(){return n().map(c=>{const m=z(c.proxies.map(o=>o.name)??[],a(),W()),f=[(()=>{const o=de(),x=o.firstChild,w=x.nextSibling;return d(x,()=>c.name),d(w,l(E,{class:"btn btn-circle btn-sm mr-2",onClick:P=>N(P,c.name),get children(){return l(L,{})}}),null),d(w,l(E,{class:"btn btn-circle btn-sm",onClick:P=>i(P,c.name),get children(){return l(j,{})}}),null),o})(),l(oe,{get subscriptionInfo(){return c.subscriptionInfo}}),(()=>{const o=ue(),x=o.firstChild,w=x.nextSibling;return w.nextSibling,d(o,()=>c.vehicleType,x),d(o,()=>e("updated"),w),d(o,()=>Q(c.updatedAt),null),o})(),l(C,{get when(){return!y()[`provider-${c.name}`]},get children(){return l(J,{proxyNameList:m})}})],v=l(q,{proxyNames:m});return l(V,{get isOpen(){return y()[`provider-${c.name}`]},title:f,content:v,onCollapse:o=>S({...y(),[`provider-${c.name}`]:o})})})}}),null),u})()},xe=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"}));export{J as P,q as a,me as b,xe as c};
