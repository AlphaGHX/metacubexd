import{i as r,e as m,l as a,u as S,c as x,J as F,F as g,S as D,x as E,h as y,s as $,m as k}from"./vendor-f843f104.js";import{z as i,c as C,v as T}from"./index-60009942.js";import{u as w,P as R}from"./index-f8b4fd0c.js";const j=a('<div class="flex flex-col p-4">'),Q=a('<div class="flex flex-col"><form class="flex items-center gap-2"><input name="name" class="input input-bordered flex-1"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX</option></select><button type="submit" class="btn btn-primary">'),q=a('<div class="py-2">'),I=a('<div><form class="contents">'),A=a('<div class="form-control w-64 max-w-xs"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),P=a("<div>"),L=a('<div class="flex">'),M=a('<div><input class="input input-bordered w-96">'),N=a('<label class="flex items-center"><input class="radio m-4" type="radio" name="proxiesPreviewType">'),X=a('<div class="flex flex-col gap-4">'),O=i.object({name:i.string(),type:i.string()}),V=()=>{const[s]=S(),e=w(),{form:t}=C({extend:T({schema:O}),onSubmit:async l=>{e.get("dns/query",{searchParams:{name:l.name,type:l.type}}).json().then(({Answer:c})=>n((c==null?void 0:c.map(({data:u})=>u))||[]))}}),[o,n]=x([]);return(()=>{const l=Q(),c=l.firstChild,u=c.firstChild,d=u.nextSibling,_=d.nextSibling;return F(t,c,()=>t),r(_,()=>s("dnsQuery")),r(l,m(D,{get when(){return o().length>0},get children(){const f=j();return r(f,m(g,{get each(){return o()},children:b=>(()=>{const p=q();return r(p,b),p})()})),f}}),null),l})()},z=i.object({port:i.number(),"socks-port":i.number(),"redir-port":i.number(),"tproxy-port":i.number(),"mixed-port":i.number()}),B=()=>{const s=w(),e=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:t,setInitialValues:o,reset:n}=C({extend:T({schema:z})});return E(async()=>{const l=await s.get("configs").json();o(l),n()}),(()=>{const l=I(),c=l.firstChild;return F(t,c,()=>t),r(c,m(g,{each:e,children:u=>(()=>{const d=A(),_=d.firstChild,f=_.firstChild,b=_.nextSibling;return r(f,()=>u.label),y(p=>{const h=u.key,v=u.label;return h!==p._v$&&$(b,"name",p._v$=h),v!==p._v$2&&$(b,"placeholder",p._v$2=v),p},{_v$:void 0,_v$2:void 0}),d})()})),l})()},[H,J]=k(x(R.BAR),{name:"proxiesPreviewType",storage:localStorage}),[U,W]=k(x("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),Y=()=>{const[s]=S();return[(()=>{const e=P();return r(e,()=>s("proxiesPreviewType")),e})(),(()=>{const e=L();return r(e,m(g,{get each(){return Object.values(R)},children:t=>(()=>{const o=N(),n=o.firstChild;return r(o,()=>s(t),n),n.addEventListener("change",()=>J(t)),$(n,"aria-label",t),y(()=>n.checked=t===H()),o})()})),e})(),(()=>{const e=P();return r(e,()=>s("urlForDelayTest")),e})(),(()=>{const e=M(),t=e.firstChild;return t.addEventListener("change",o=>{var n;return W((n=o.target)==null?void 0:n.value)}),y(()=>t.value=U()),e})()]},ee=()=>(()=>{const s=X();return r(s,m(V,{}),null),r(s,m(B,{}),null),r(s,m(Y,{}),null),s})();export{ee as default,H as proxiesPreviewType,J as setProxiesPreviewType,W as setUrlForDelayTest,U as urlForDelayTest};
