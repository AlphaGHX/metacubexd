import{l as L,i as l,o as d,u as N,c as y,g as c,a9 as C,a8 as F,S as T,d as U}from"./vendor-01afc7ba.js";import{P as B,a as D,C as M,F as Y}from"./ProxyNodePreview-920a2065.js";import{b as h}from"./index-ac54fc13.js";import{d as A,f as j,g as f}from"./proxies-84eeffd0.js";import{d as I}from"./index-ccde4305.js";const R=d('<progress class="progress" max="100">'),z=d('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),G=d('<div class="text-sm text-slate-500">Expire: <!> '),H=e=>{const i=h(e.Total,{units:"iec"}),t=h(e.Download+e.Upload,{units:"iec"}),m=((e.Download+e.Upload)/e.Total*100).toFixed(2);return{total:i,used:t,percentage:m,expireStr:()=>e.Expire===0?"Null":A(e.Expire*1e3).format("YYYY-MM-DD")}},O=e=>{if(!e.subscriptionInfo)return;const i=H(e.subscriptionInfo);return[(()=>{const t=R();return L(()=>t.value=i.percentage),t})(),(()=>{const t=z(),m=t.firstChild,p=m.nextSibling,u=p.nextSibling,$=u.nextSibling;return $.nextSibling,l(t,()=>`${i.used}`,m),l(t,()=>`${i.total}`,p),l(t,()=>i.percentage,$),t})(),(()=>{const t=G(),m=t.firstChild,p=m.nextSibling;return p.nextSibling,l(t,()=>i.expireStr(),p),t})()]},q=d('<div class="flex flex-col gap-2"><h1 class="flex h-8 items-center pb-2 text-lg font-semibold"><button class="btn btn-circle btn-ghost btn-sm ml-2">'),J=d('<div class="mr-8 flex items-center justify-between"><span></span><div><button class="btn btn-circle btn-sm mr-2"></button><button class="btn btn-circle btn-sm">'),K=d('<div class="text-sm text-slate-500"> :: Updated '),tt=()=>{const[e]=N(),{proxyProviders:i,updateProviderByProviderName:t,updateAllProvider:m,healthCheckByProviderName:p}=I(),[u,$]=y({}),S=async(a,r)=>{const o=f(a);o.classList.add("animate-pulse"),a.stopPropagation(),await p(r),o.classList.remove("animate-pulse")},v=async(a,r)=>{const o=f(a);o.classList.add("animate-spin"),a.stopPropagation(),await t(r),o.classList.remove("animate-spin")},w=async a=>{const r=f(a);r.classList.add("animate-spin"),a.stopPropagation(),await m(),r.classList.remove("animate-spin")};return(()=>{const a=q(),r=a.firstChild,o=r.firstChild;return l(r,()=>e("proxyProviders"),o),o.$$click=s=>w(s),l(o,c(C,{})),l(a,c(Y,{get subChild(){return i().map(s=>{const k=[(()=>{const n=J(),g=n.firstChild,E=g.nextSibling,x=E.firstChild,_=x.nextSibling;return l(g,()=>s.name),x.$$click=b=>v(b,s.name),l(x,c(C,{})),_.$$click=b=>S(b,s.name),l(_,c(F,{})),n})(),c(O,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{const n=K(),g=n.firstChild;return l(n,()=>s.vehicleType,g),l(n,()=>j(s.updatedAt),null),n})(),c(T,{get when(){return!u()[`provider-${s.name}`]},get children(){return c(B,{get proxyNameList(){return s.proxies.map(n=>n.name)??[]}})}})],P=c(D,{get proxies(){return s.proxies.map(n=>n.name)}});return c(M,{get isOpen(){return u()[`provider-${s.name}`]},title:k,content:P,onCollapse:n=>$({...u(),[`provider-${s.name}`]:n})})})}}),null),a})()};U(["click"]);export{tt as default};
