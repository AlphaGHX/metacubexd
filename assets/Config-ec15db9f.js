import{c as b,x as M,i as a,e as m,F as D,S as V,J as z,h as c,s as C,l as d,m as H,d as J}from"./vendor-f843f104.js";import{c as W,v as X,z as r}from"./index-60009942.js";import{u as Y}from"./index-99f35ae8.js";import{P as i}from"./enum-a4780acc.js";const G=d('<div class="flex flex-col p-4">'),K=d('<div><form class="flex items-center gap-2"><input class="input input-bordered flex-1"><button type="submit" class="btn btn-primary">DNS Query</button></form><div class="mt-4"><div>Proxies preview type:</div><div class="join"><label class="flex items-center">Bar<input class="radio m-4" aria-label="Bar" type="radio" name="proxiesPreviewType"></label><label class="flex items-center">Dots<input class="radio m-4" aria-label="Dots" type="radio" name="proxiesPreviewType"></label></div></div><form class="contents">'),U=d('<div class="py-2">'),Z=d('<div class="form-control w-64 max-w-xs"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),ee=r.object({port:r.number(),"socks-port":r.number(),"redir-port":r.number(),"tproxy-port":r.number(),"mixed-port":r.number()}),[E,R]=H(b(i.BAR),{name:"proxiesPreviewType",storage:localStorage}),ne=()=>{const v=Y(),[f,T]=b(""),[x,N]=b([]),y=()=>v.get("dns/query",{searchParams:{name:f()}}).json().then(({Answer:t})=>{N(t.map(({data:s})=>s))}),Q=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:_,setInitialValues:B,reset:L}=W({extend:X({schema:ee})});return M(async()=>{const t=await v.get("configs").json();B(t),L()}),(()=>{const t=K(),s=t.firstChild,p=s.firstChild,u=s.nextSibling,j=u.firstChild,A=j.nextSibling,$=A.firstChild,q=$.firstChild,h=q.nextSibling,F=$.nextSibling,I=F.firstChild,g=I.nextSibling,S=u.nextSibling;return s.addEventListener("submit",e=>{e.preventDefault(),y()}),p.$$input=e=>T(e.target.value),p.addEventListener("submit",y),a(t,m(V,{get when(){return x().length>0},get children(){const e=G();return a(e,m(D,{get each(){return x()},children:o=>(()=>{const l=U();return a(l,o),l})()})),e}}),u),h.addEventListener("change",()=>R(i.BAR)),g.addEventListener("change",()=>R(i.DOTS)),z(_,S,()=>_),a(S,m(D,{each:Q,children:e=>(()=>{const o=Z(),l=o.firstChild,O=l.firstChild,P=l.nextSibling;return a(O,()=>e.label),c(n=>{const k=e.key,w=e.label;return k!==n._v$&&C(P,"name",n._v$=k),w!==n._v$2&&C(P,"placeholder",n._v$2=w),n},{_v$:void 0,_v$2:void 0}),o})()})),c(()=>p.value=f()),c(()=>h.checked=i.BAR===E()),c(()=>g.checked=i.DOTS===E()),t})()};J(["input"]);export{ne as default,E as proxiesPreviewType,R as setProxiesPreviewType};
