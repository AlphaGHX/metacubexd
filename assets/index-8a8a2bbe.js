import{m as f,c as m,k as ie,a as q,d as le,u as z,b as ce,e as de,f as V,i as h,g as t,I as ue,A as Q,F as I,S as Z,h as pe,j as me,l as E,n as he,t as ge,o as P,s as k,p as fe,q as ve,r as ye,v as we,w as xe,x as be,y as _e,z as Pe,B as Ce,R as y,N as Se,C as $e,D as x,E as Te,G as De,H as Ne,J as Le,K as Ie}from"./vendor-01afc7ba.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const Ee="modulepreload",Oe=function(e,r){return new URL(e,r).href},F={},b=function(r,a,d){if(!a||a.length===0)return r();const s=document.getElementsByTagName("link");return Promise.all(a.map(n=>{if(n=Oe(n,d),n in F)return;F[n]=!0;const c=n.endsWith(".css"),v=c?'[rel="stylesheet"]':"";if(!!d)for(let u=s.length-1;u>=0;u--){const l=s[u];if(l.href===n&&(!c||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${v}`))return;const o=document.createElement("link");if(o.rel=c?"stylesheet":Ee,c||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),c)return new Promise((u,l)=>{o.addEventListener("load",u),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>r()).catch(n=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n})};var p=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Proxyprovider="/proxyprovider",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e))(p||{}),J=(e=>(e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.Source="source",e.Destination="destination",e))(J||{}),ke=(e=>(e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(ke||{}),W=(e=>(e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(W||{}),_=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(_||{});const Re=Object.values(J),bt={...Object.fromEntries(Re.map(e=>[e,!0])),ID:!1},Be=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],Me=()=>{const e=$();return ie.create({prefixUrl:e==null?void 0:e.url,headers:{Authorization:e!=null&&e.secret?`Bearer ${e.secret}`:""}})},[S,Fe]=f(m(""),{name:"selectedEndpoint",storage:localStorage}),[Ue,_t]=f(m([]),{name:"endpointList",storage:localStorage}),[je,O]=f(m("halloween"),{name:"theme",storage:localStorage}),$=()=>Ue().find(({id:e})=>e===S()),Pt=()=>{var e;return(e=$())==null?void 0:e.secret},Ct=()=>{var e;return(e=$())==null?void 0:e.url.replace("http","ws")},[St,$t]=f(m(W.BAR),{name:"proxiesPreviewType",storage:localStorage}),[Ae,Tt]=f(m("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),[Ge,Dt]=f(m(!1),{name:"autoCloseConns",storage:localStorage}),[He,Nt]=f(m(!1),{name:"autoSwitchTheme",storage:localStorage}),[qe,Lt]=f(m("light"),{name:"favDayTheme",storage:localStorage}),[ze,It]=f(m("night"),{name:"favNightTheme",storage:localStorage}),X=e=>{He()&&O(e?ze():qe())};function Ve(){X(window.matchMedia("(prefers-color-scheme: dark)").matches)}function Qe(){Ve(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{X(e.matches)})}const[U,j]=m([]),[A,Ze]=m([]),[L,G]=m({}),[H,Je]=m({});function Y(){const e=Me(),r=i=>{i.forEach(o=>{var l;const u=((l=o.history.at(-1))==null?void 0:l.delay)??0;Je({...H(),[o.name]:{udp:o.udp,type:o.type,name:o.name}}),G({...L(),[o.name]:u})})},a=async()=>{const{providers:i}=await e.get("providers/proxies").json();Object.values(i).forEach(l=>{r(l.proxies)}),Ze(Object.values(i).filter(l=>l.name!=="default"&&l.vehicleType!=="Compatible"));const{proxies:o}=await e.get("proxies").json(),u=[...o.GLOBAL.all??[],"GLOBAL"];r(Object.values(o)),j(Object.values(o).filter(l=>{var g;return(g=l.all)==null?void 0:g.length}).sort((l,g)=>u.indexOf(l.name)-u.indexOf(g.name)))};return{proxies:U,proxyProviders:A,delayTestByProxyGroupName:async i=>{const o=await e.get(`group/${i}/delay`,{searchParams:{url:Ae(),timeout:2e3}}).json();G({...L(),...o})},delayMap:L,proxyNodeMap:H,updateProxy:a,setProxyGroupByProxyName:async(i,o)=>{const u=U().slice(),l=u.find(g=>g.name===i.name);Ge()&&e.delete("connections"),await e.put(`proxies/${i.name}`,{body:JSON.stringify({name:o})}),l.now=o,j(u)},updateProviderByProviderName:async i=>{try{await e.put(`providers/proxies/${i}`)}catch{}await a()},updateAllProvider:async()=>{await Promise.all(A().map(i=>e.put(`providers/proxies/${i.name}`))),await a()},healthCheckByProviderName:async i=>{await e.get(`providers/proxies/${i}/healthcheck`,{timeout:30*1e3}),await a()}}}q(()=>{S()&&$()&&Y().updateProxy()});const We=P('<li class="tooltip tooltip-bottom">'),Xe=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-box gap-2 bg-base-300 p-2 shadow">'),Ye=P('<li class="btn btn-xs">'),Ke=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal gap-2">'),et=P('<ul class="navbar rounded-box sticky inset-x-0 top-2 z-10 mx-2 mt-2 flex w-auto items-center justify-center bg-base-300 px-4"><div class="navbar-start gap-4"><div><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-box min-h-full w-2/5 gap-2 bg-base-300 pt-20 shadow"></ul></div></div><a class="text-xl font-bold normal-case" href="https://github.com/metacubex/metacubexd" target="_blank">metacubexd</a></div><div class="navbar-end"><div class="flex items-center gap-2"><button class="btn btn-circle btn-sm"></button><button class="btn btn-circle btn-secondary btn-sm">'),tt=P("<li>"),ot=({href:e,tooltip:r,children:a})=>(()=>{const d=We();return k(d,"data-tip",r),h(d,t(Q,{class:"rounded-box",href:e,children:a})),d})(),rt=()=>(()=>{const e=Xe(),r=e.firstChild,a=r.nextSibling,d=a.firstChild,s=a.nextSibling,n=s.firstChild,c=n.nextSibling;return h(d,t(fe,{})),h(c,t(I,{each:Be,children:v=>(()=>{const i=Ye();return i.$$click=()=>O(v),k(i,"data-theme",v),h(i,v),i})()})),e})(),nt=()=>{const[e,{locale:r}]=z(),{proxyProviders:a}=Y(),d=ce(()=>{const o=[{href:p.Overview,name:e("overview"),icon:t(ve,{})},{href:p.Proxies,name:e("proxies"),icon:t(ye,{})},{href:p.Rules,name:e("rules"),icon:t(we,{})},{href:p.Conns,name:e("connections"),icon:t(xe,{})},{href:p.Log,name:e("logs"),icon:t(be,{})},{href:p.Config,name:e("config"),icon:t(_e,{})}];return a().length>0&&o.splice(2,0,{href:p.Proxyprovider,name:e("proxyProviders"),icon:t(Pe,{})}),o}),s=de(),n=V(),[c,v]=m(!1),i=()=>{Fe(""),n("/setup")};return(()=>{const o=et(),u=o.firstChild,l=u.firstChild,g=l.firstChild,R=g.nextSibling,te=R.firstChild,oe=R.nextSibling,re=oe.firstChild,ne=re.nextSibling,B=u.nextSibling,M=B.firstChild,T=M.firstChild,D=T.nextSibling;return g.addEventListener("change",w=>v(w.target.checked)),h(te,t(ue,{})),h(ne,t(I,{get each(){return d()},children:({href:w,name:N})=>(()=>{const C=tt();return C.$$click=()=>v(!1),h(C,t(Q,{href:w,children:N})),C})()})),h(o,t(Z,{get when(){return s.pathname!=="/setup"},get children(){const w=Ke(),N=w.firstChild;return h(N,t(I,{get each(){return d()},children:({href:C,name:ae,icon:se})=>t(ot,{href:C,tooltip:ae,children:se})})),w}}),B),T.$$click=()=>{const w=r();r(w===_.EN?_.ZH:_.EN)},h(T,t(pe,{})),h(M,t(rt,{}),D),D.$$click=i,h(D,t(me,{})),E(()=>he(l,ge("drawer w-auto lg:hidden",""))),E(()=>g.checked=c()),o})()};le(["click"]);const at=P('<div class="relative flex h-screen flex-col subpixel-antialiased"><div class="flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4">'),st=x(()=>b(()=>import("./Setup-adae3e9d.js"),["./Setup-adae3e9d.js","./vendor-01afc7ba.js","./index-b0a7f1b6.js"],import.meta.url)),it=x(()=>b(()=>import("./Overview-83c9f5de.js"),["./Overview-83c9f5de.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-ac54fc13.js"],import.meta.url)),lt=x(()=>b(()=>import("./Connections-d1fc83d9.js"),["./Connections-d1fc83d9.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-3bd469e3.js","./index-ac54fc13.js"],import.meta.url)),ct=x(()=>b(()=>import("./Logs-3d62b424.js"),["./Logs-3d62b424.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-3bd469e3.js"],import.meta.url)),dt=x(()=>b(()=>import("./Proxies-7acdca7a.js"),["./Proxies-7acdca7a.js","./vendor-01afc7ba.js","./ProxyNodePreview-ee0f46c8.js","./index-02de5b64.js"],import.meta.url)),ut=x(()=>b(()=>import("./ProxyProvider-e39f9a32.js"),["./ProxyProvider-e39f9a32.js","./vendor-01afc7ba.js","./ProxyNodePreview-ee0f46c8.js","./index-02de5b64.js","./index-ac54fc13.js","./proxies-c53981d7.js"],import.meta.url)),pt=x(()=>b(()=>import("./Rules-002cd224.js"),["./Rules-002cd224.js","./vendor-01afc7ba.js","./index-02de5b64.js","./proxies-c53981d7.js"],import.meta.url)),mt=x(()=>b(()=>import("./Config-c18d1e3a.js"),["./Config-c18d1e3a.js","./vendor-01afc7ba.js","./index-b0a7f1b6.js"],import.meta.url)),ht=()=>{const e=V();return Qe(),Ce(async()=>{S()||e("/setup")}),(()=>{const r=at(),a=r.firstChild;return h(r,t(nt,{}),a),h(a,t($e,{get children(){return[t(Z,{get when(){return S()},get children(){return[t(y,{get path(){return p.Overview},component:it}),t(y,{get path(){return p.Proxies},component:dt}),t(y,{get path(){return p.Proxyprovider},component:ut}),t(y,{get path(){return p.Rules},component:pt}),t(y,{get path(){return p.Conns},component:lt}),t(y,{get path(){return p.Log},component:ct}),t(y,{get path(){return p.Config},component:mt}),t(y,{path:"*",get element(){return t(Se,{get href(){return p.Overview}})}})]}}),t(y,{path:"/setup",component:st})]}})),E(()=>k(r,"data-theme",je())),r})()},gt={add:"Add",overview:"Overview",proxies:"Proxies",rules:"Rules",connections:"Connections",logs:"Logs",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",chains:"Chains",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",source:"Source",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",proxiesPreviewType:"Proxies preview type",urlForDelayTest:"Url for delay test",autoCloseConns:"Automatically close all connections",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme"},ft={add:"添加",overview:"概览",proxies:"代理",rules:"规则",connections:"连接",logs:"日志",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",chains:"链路",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",source:"源地址",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",proxiesPreviewType:"节点组预览样式",urlForDelayTest:"测速链接",autoCloseConns:"切换代理时自动断开全部连接",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好"},K={[_.EN]:gt,[_.ZH]:ft},ee=()=>{const[e,r]=f(m(Reflect.has(K,navigator.language)?navigator.language:_.EN),{name:"lang",storage:localStorage});return{lang:e,setLang:r}},vt=e=>{const{setLang:r}=ee(),[a,{locale:d}]=z();return q(()=>{r(d())}),e.children},yt=e=>{const{lang:r}=ee(),a=Te(K,r());return t(De.Provider,{value:a,get children(){return t(vt,{get children(){return e.children}})}})},wt=document.getElementById("root");Ne(()=>t(yt,{get children(){return t(Le,{get source(){return Ie()},get children(){return t(ht,{})}})}}),wt);export{J as A,ke as D,W as P,Fe as a,Pt as b,bt as c,Y as d,Ue as e,Nt as f,Ve as g,He as h,Re as i,Lt as j,qe as k,It as l,ze as m,$t as n,Dt as o,St as p,Tt as q,Ge as r,_t as s,Be as t,Me as u,Ae as v,Ct as w};
