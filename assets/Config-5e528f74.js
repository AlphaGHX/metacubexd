import{i as e,e as n,h as g,u as A,c as N,M as V,F as T,S as Y,B as te,f as o,s as B,a as X,z as se,W as ne}from"./vendor-cb4efd1e.js";import{z as f,c as Z,v as J}from"./index-8e617c82.js";import{B as L}from"./Button-7c6b8c49.js";import{u as K,x as re,y as le,z as ae,A as ie,B as ce,E as oe,F as de,G as ue,H as ge,I as O,J as q,K as he,M as W,N as pe,O as me,Q as fe,R as ve,S as xe,o as be,T as _e,U as $e,V as ye,W as Se,X as j,m as Ce,r as Te,Y as we,n as ke,p as Ee,i as Pe,b as Le,Z as Ie}from"./index-55799cd4.js";const Re=g('<div class="pb-4 text-lg font-semibold">'),De=g('<div class="flex flex-col p-4">'),Fe=g('<div class="flex flex-col"><form class="flex flex-col gap-2 sm:flex-row"><input name="name" class="input input-bordered w-full sm:flex-1"><div class="flex items-center gap-2"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Ne=g('<div class="py-2">'),Oe=g('<div class="flex flex-col gap-4"><form class="contents"></form><div class="flex flex-wrap items-center gap-2"></div><div class="flex flex-col"><input class="input input-bordered max-w-md"></div><div><input type="number" class="input input-bordered w-full max-w-md"></div><div><input class="toggle" type="checkbox">'),je=g('<div class="form-control w-64 max-w-sm"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),H=g('<div class="flex flex-col"><select class="select select-bordered w-full max-w-xs">'),Ae=g('<div class="grid gap-4"><div class="flex flex-col"><input type="checkbox" class="toggle"></div><div class="flex flex-col"><input type="checkbox" class="toggle"></div><div class="flex flex-col"><input type="checkbox" class="toggle"></div><div><input class="toggle" type="checkbox"></div><div><select class="select select-bordered w-full max-w-xs"></select></div><div><select class="select select-bordered w-full max-w-xs"></select></div><div><select class="select select-bordered w-full max-w-xs"></select></div><div></div><div>'),F=g("<option>"),Ge=g('<option class="flex items-center gap-2">'),Me=g('<div class="flex flex-col gap-4"><kbd class="kbd">'),Ue=f.object({name:f.string(),type:f.string()}),u=s=>(()=>{const a=Re();return e(a,ne(()=>s.children)),a})(),ze=()=>{const[s]=A(),a=K(),{form:w,isSubmitting:k}=Z({extend:J({schema:Ue}),onSubmit:async d=>{a.get("dns/query",{searchParams:{name:d.name,type:d.type}}).json().then(({Answer:c})=>C((c==null?void 0:c.map(({data:h})=>h))||[]))}}),[v,C]=N([]);return(()=>{const d=Fe(),c=d.firstChild,h=c.firstChild,p=h.nextSibling;return p.firstChild,V(w,c,()=>w),e(p,n(L,{type:"submit",class:"btn-primary",get loading(){return k()},get children(){return s("dnsQuery")}}),null),e(d,n(Y,{get when(){return v().length>0},get children(){const x=De();return e(x,n(T,{get each(){return v()},children:m=>(()=>{const b=Ne();return e(b,m),b})()})),x}}),null),d})()},Qe=f.object({port:f.number(),"socks-port":f.number(),"redir-port":f.number(),"tproxy-port":f.number(),"mixed-port":f.number()}),Be=()=>{const[s]=A(),a=K(),w=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:k,setInitialValues:v,reset:C}=Z({extend:J({schema:Qe})});te(async()=>{const _=await a.get("configs").json();v(_),C()});const[d,c]=N(!1),[h,p]=N(!1),[x,m]=N(!1),b=async()=>{c(!0);try{await a.post("configs/geo")}catch{}c(!1)},I=async()=>{p(!0);try{await a.post("upgrade")}catch{}p(!1)},E=async()=>{m(!0);try{await a.post("restart")}catch{}m(!1)};return(()=>{const _=Oe(),$=_.firstChild,y=$.nextSibling,S=y.nextSibling,P=S.firstChild,R=S.nextSibling,t=R.firstChild,r=R.nextSibling,i=r.firstChild;return V(k,$,()=>k),e($,n(T,{each:w,children:l=>(()=>{const G=je(),M=G.firstChild,ee=M.firstChild,U=M.nextSibling;return e(ee,()=>l.label),o(D=>{const z=l.key,Q=l.label;return z!==D._v$&&B(U,"name",D._v$=z),Q!==D._v$2&&B(U,"placeholder",D._v$2=Q),D},{_v$:void 0,_v$2:void 0}),G})()})),e(y,n(L,{get loading(){return d()},onClick:b,get children(){return s("updateGEODatabases")}}),null),e(y,n(L,{get loading(){return h()},onClick:I,get children(){return s("upgradeCore")}}),null),e(y,n(L,{get loading(){return x()},onClick:E,get children(){return s("restartCore")}}),null),e(S,n(u,{get children(){return s("urlForLatencyTest")}}),P),P.addEventListener("change",l=>re(l.target.value)),e(R,n(u,{get children(){return[X(()=>s("speedtestTimeoutDuration"))," (",X(()=>s("ms")),")"]}}),t),t.addEventListener("change",l=>le(Number(l.target.value))),e(r,n(u,{get children(){return s("autoCloseConns")}}),i),i.addEventListener("change",l=>ae(l.target.checked)),o(()=>P.value=ie()),o(()=>t.value=ce()),o(()=>i.checked=oe()),_})()},Xe=()=>{const[s,{locale:a}]=A(),w=se(),k=()=>{Le(""),w(Ie.Setup)};return(()=>{const v=Ae(),C=v.firstChild,d=C.firstChild,c=C.nextSibling,h=c.firstChild,p=c.nextSibling,x=p.firstChild,m=p.nextSibling,b=m.firstChild,I=m.nextSibling,E=I.firstChild,_=I.nextSibling,$=_.firstChild,y=_.nextSibling,S=y.firstChild,P=y.nextSibling,R=P.nextSibling;return e(C,n(u,{get children(){return s("renderInTwoColumns")}}),d),d.addEventListener("change",t=>{de(t.target.checked)}),e(c,n(u,{get children(){return s("renderProxiesInSamePage")}}),h),h.addEventListener("change",t=>{ue(t.target.checked)}),e(p,n(u,{get children(){return s("autoSwitchTheme")}}),x),x.addEventListener("change",t=>{ge(t.target.checked),O()}),e(v,n(Y,{get when(){return q()},get children(){return[(()=>{const t=H(),r=t.firstChild;return e(t,n(u,{get children(){return s("favDayTheme")}}),r),r.addEventListener("change",i=>{he(i.target.value),O()}),e(r,n(T,{each:W,children:i=>(()=>{const l=F();return l.value=i,e(l,i),o(()=>l.selected=pe()===i),l})()})),t})(),(()=>{const t=H(),r=t.firstChild;return e(t,n(u,{get children(){return s("favNightTheme")}}),r),r.addEventListener("change",i=>{me(i.target.value),O()}),e(r,n(T,{each:W,children:i=>(()=>{const l=F();return l.value=i,e(l,i),o(()=>l.selected=fe()===i),l})()})),t})()]}}),m),e(m,n(u,{get children(){return s("useTwemoji")}}),b),b.addEventListener("change",t=>ve(t.target.checked)),e(I,n(u,{get children(){return s("proxiesPreviewType")}}),E),E.addEventListener("change",t=>xe(t.target.value)),e(E,n(T,{get each(){return Object.values(be)},children:t=>(()=>{const r=F();return r.value=t,e(r,()=>s(t)),r})()})),e(_,n(u,{get children(){return s("proxiesSorting")}}),$),$.addEventListener("change",t=>_e(t.target.value)),e($,n(T,{get each(){return Object.values($e)},children:t=>(()=>{const r=Ge();return r.value=t,e(r,()=>s(t)),r})()})),e(y,n(u,{get children(){return s("tableSize")}}),S),S.addEventListener("change",t=>ye(t.target.value)),e(S,n(T,{get each(){return Object.values(Se)},children:t=>(()=>{const r=F();return r.value=t,e(r,()=>s(t)),r})()})),e(P,n(L,{onClick:()=>{const t=a();a(t===j.EN?j.ZH:j.EN)},get children(){return s("switchLanguage")}})),e(R,n(L,{onClick:k,get children(){return s("switchEndpoint")}})),o(()=>d.checked=Ce()),o(()=>h.checked=Te()),o(()=>x.checked=q()),o(()=>b.checked=we()),o(()=>E.value=ke()),o(()=>$.value=Ee()),o(()=>S.value=Pe()),v})()},Ye=()=>(()=>{const s=Me(),a=s.firstChild;return e(s,n(ze,{}),a),e(s,n(Be,{}),a),e(s,n(Xe,{}),a),e(a,()=>"1.74.4"),s})();export{Ye as default};
