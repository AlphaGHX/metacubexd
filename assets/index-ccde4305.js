import{m as g,c as p,k as ie,a as q,d as le,u as z,b as ce,e as de,f as V,i as h,g as t,I as ue,A as Q,F as L,S as Z,h as me,j as pe,l as E,n as he,t as ge,o as P,s as k,p as fe,q as ve,r as ye,v as we,w as xe,x as be,y as _e,z as Pe,B as Ce,R as y,N as Se,C as Te,D as x,E as $e,G as De,H as Ie,J as Ne,K as Le}from"./vendor-01afc7ba.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))d(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const Ee="modulepreload",Oe=function(e,r){return new URL(e,r).href},F={},b=function(r,s,d){if(!s||s.length===0)return r();const a=document.getElementsByTagName("link");return Promise.all(s.map(n=>{if(n=Oe(n,d),n in F)return;F[n]=!0;const c=n.endsWith(".css"),v=c?'[rel="stylesheet"]':"";if(!!d)for(let u=a.length-1;u>=0;u--){const l=a[u];if(l.href===n&&(!c||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${v}`))return;const o=document.createElement("link");if(o.rel=c?"stylesheet":Ee,c||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),c)return new Promise((u,l)=>{o.addEventListener("load",u),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>r()).catch(n=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n})};var m=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Proxyprovider="/proxyprovider",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e))(m||{}),J=(e=>(e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.Source="source",e.Destination="destination",e))(J||{}),ke=(e=>(e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(ke||{}),W=(e=>(e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(W||{}),_=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(_||{});const Re=Object.values(J),bt={...Object.fromEntries(Re.map(e=>[e,!0])),ID:!1},Be=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],Me=()=>{const e=T();return ie.create({prefixUrl:e==null?void 0:e.url,headers:{Authorization:e!=null&&e.secret?`Bearer ${e.secret}`:""}})},[S,Fe]=g(p(""),{name:"selectedEndpoint",storage:localStorage}),[Ue,_t]=g(p([]),{name:"endpointList",storage:localStorage}),[je,O]=g(p("halloween"),{name:"theme",storage:localStorage}),T=()=>Ue().find(({id:e})=>e===S()),Pt=()=>{var e;return(e=T())==null?void 0:e.secret},Ct=()=>{var e;return(e=T())==null?void 0:e.url.replace("http","ws")},[St,Tt]=g(p(W.BAR),{name:"proxiesPreviewType",storage:localStorage}),[Ae,$t]=g(p("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),[Ge,Dt]=g(p(!1),{name:"autoCloseConns",storage:localStorage}),[He,It]=g(p(!1),{name:"autoSwitchTheme",storage:localStorage}),[qe,Nt]=g(p("light"),{name:"favDayTheme",storage:localStorage}),[ze,Lt]=g(p("night"),{name:"favNightTheme",storage:localStorage}),[Et,Ot]=g(p(!0),{name:"renderInTwoColumn",storage:localStorage}),X=e=>{He()&&O(e?ze():qe())};function Ve(){X(window.matchMedia("(prefers-color-scheme: dark)").matches)}function Qe(){Ve(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{X(e.matches)})}const[U,j]=p([]),[A,Ze]=p([]),[N,G]=p({}),[H,Je]=p({});function Y(){const e=Me(),r=i=>{i.forEach(o=>{var l;const u=((l=o.history.at(-1))==null?void 0:l.delay)??0;Je({...H(),[o.name]:{udp:o.udp,type:o.type,name:o.name}}),G({...N(),[o.name]:u})})},s=async()=>{const{providers:i}=await e.get("providers/proxies").json();Object.values(i).forEach(l=>{r(l.proxies)}),Ze(Object.values(i).filter(l=>l.name!=="default"&&l.vehicleType!=="Compatible"));const{proxies:o}=await e.get("proxies").json(),u=[...o.GLOBAL.all??[],"GLOBAL"];r(Object.values(o)),j(Object.values(o).filter(l=>{var f;return(f=l.all)==null?void 0:f.length}).sort((l,f)=>u.indexOf(l.name)-u.indexOf(f.name)))};return{proxies:U,proxyProviders:A,delayTestByProxyGroupName:async i=>{const o=await e.get(`group/${i}/delay`,{searchParams:{url:Ae(),timeout:2e3}}).json();G({...N(),...o})},delayMap:N,proxyNodeMap:H,updateProxy:s,setProxyGroupByProxyName:async(i,o)=>{const u=U().slice(),l=u.find(f=>f.name===i.name);Ge()&&e.delete("connections"),await e.put(`proxies/${i.name}`,{body:JSON.stringify({name:o})}),l.now=o,j(u)},updateProviderByProviderName:async i=>{try{await e.put(`providers/proxies/${i}`)}catch{}await s()},updateAllProvider:async()=>{await Promise.all(A().map(i=>e.put(`providers/proxies/${i.name}`))),await s()},healthCheckByProviderName:async i=>{await e.get(`providers/proxies/${i}/healthcheck`,{timeout:30*1e3}),await s()}}}q(()=>{S()&&T()&&Y().updateProxy()});const We=P('<li class="tooltip tooltip-bottom">'),Xe=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-l-box gap-2 bg-base-300 p-2 shadow">'),Ye=P('<li class="btn btn-xs">'),Ke=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal gap-2">'),et=P('<ul class="navbar rounded-box sticky inset-x-0 top-2 z-10 mx-2 mt-2 flex w-auto items-center justify-center bg-base-300 px-4"><div class="navbar-start gap-4"><div><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-r-box min-h-full w-2/5 gap-2 bg-base-300 pt-20 shadow"></ul></div></div><a class="text-xl font-bold normal-case" href="https://github.com/metacubex/metacubexd" target="_blank">metacubexd</a></div><div class="navbar-end"><div class="flex items-center gap-2"><button class="btn btn-circle btn-sm"></button><button class="btn btn-circle btn-secondary btn-sm">'),tt=P("<li>"),ot=({href:e,tooltip:r,children:s})=>(()=>{const d=We();return k(d,"data-tip",r),h(d,t(Q,{class:"rounded-box",href:e,children:s})),d})(),rt=()=>(()=>{const e=Xe(),r=e.firstChild,s=r.nextSibling,d=s.firstChild,a=s.nextSibling,n=a.firstChild,c=n.nextSibling;return h(d,t(fe,{})),h(c,t(L,{each:Be,children:v=>(()=>{const i=Ye();return i.$$click=()=>O(v),k(i,"data-theme",v),h(i,v),i})()})),e})(),nt=()=>{const[e,{locale:r}]=z(),{proxyProviders:s}=Y(),d=ce(()=>{const o=[{href:m.Overview,name:e("overview"),icon:t(ve,{})},{href:m.Proxies,name:e("proxies"),icon:t(ye,{})},{href:m.Rules,name:e("rules"),icon:t(we,{})},{href:m.Conns,name:e("connections"),icon:t(xe,{})},{href:m.Log,name:e("logs"),icon:t(be,{})},{href:m.Config,name:e("config"),icon:t(_e,{})}];return s().length>0&&o.splice(2,0,{href:m.Proxyprovider,name:e("proxyProviders"),icon:t(Pe,{})}),o}),a=de(),n=V(),[c,v]=p(!1),i=()=>{Fe(""),n("/setup")};return(()=>{const o=et(),u=o.firstChild,l=u.firstChild,f=l.firstChild,R=f.nextSibling,te=R.firstChild,oe=R.nextSibling,re=oe.firstChild,ne=re.nextSibling,B=u.nextSibling,M=B.firstChild,$=M.firstChild,D=$.nextSibling;return f.addEventListener("change",w=>v(w.target.checked)),h(te,t(ue,{})),h(ne,t(L,{get each(){return d()},children:({href:w,name:I})=>(()=>{const C=tt();return C.$$click=()=>v(!1),h(C,t(Q,{href:w,children:I})),C})()})),h(o,t(Z,{get when(){return a.pathname!=="/setup"},get children(){const w=Ke(),I=w.firstChild;return h(I,t(L,{get each(){return d()},children:({href:C,name:se,icon:ae})=>t(ot,{href:C,tooltip:se,children:ae})})),w}}),B),$.$$click=()=>{const w=r();r(w===_.EN?_.ZH:_.EN)},h($,t(me,{})),h(M,t(rt,{}),D),D.$$click=i,h(D,t(pe,{})),E(()=>he(l,ge("drawer w-auto lg:hidden",""))),E(()=>f.checked=c()),o})()};le(["click"]);const st=P('<div class="relative flex h-screen flex-col subpixel-antialiased"><div class="flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4">'),at=x(()=>b(()=>import("./Setup-03c063ed.js"),["./Setup-03c063ed.js","./vendor-01afc7ba.js","./index-b0a7f1b6.js"],import.meta.url)),it=x(()=>b(()=>import("./Overview-31e66e8d.js"),["./Overview-31e66e8d.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-ac54fc13.js"],import.meta.url)),lt=x(()=>b(()=>import("./Connections-72c5b1b6.js"),["./Connections-72c5b1b6.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-3bd469e3.js","./index-ac54fc13.js"],import.meta.url)),ct=x(()=>b(()=>import("./Logs-55fcc458.js"),["./Logs-55fcc458.js","./vendor-01afc7ba.js","./index-d753e642.js","./index-3bd469e3.js"],import.meta.url)),dt=x(()=>b(()=>import("./Proxies-7867ae82.js"),["./Proxies-7867ae82.js","./vendor-01afc7ba.js","./ProxyNodePreview-920a2065.js","./proxies-84eeffd0.js"],import.meta.url)),ut=x(()=>b(()=>import("./ProxyProvider-7fd9bbe5.js"),["./ProxyProvider-7fd9bbe5.js","./vendor-01afc7ba.js","./ProxyNodePreview-920a2065.js","./proxies-84eeffd0.js","./index-ac54fc13.js"],import.meta.url)),mt=x(()=>b(()=>import("./Rules-19f2fdaa.js"),["./Rules-19f2fdaa.js","./vendor-01afc7ba.js","./proxies-84eeffd0.js"],import.meta.url)),pt=x(()=>b(()=>import("./Config-ef139d86.js"),["./Config-ef139d86.js","./vendor-01afc7ba.js","./index-b0a7f1b6.js"],import.meta.url)),ht=()=>{const e=V();return Qe(),Ce(async()=>{S()||e("/setup")}),(()=>{const r=st(),s=r.firstChild;return h(r,t(nt,{}),s),h(s,t(Te,{get children(){return[t(Z,{get when(){return S()},get children(){return[t(y,{get path(){return m.Overview},component:it}),t(y,{get path(){return m.Proxies},component:dt}),t(y,{get path(){return m.Proxyprovider},component:ut}),t(y,{get path(){return m.Rules},component:mt}),t(y,{get path(){return m.Conns},component:lt}),t(y,{get path(){return m.Log},component:ct}),t(y,{get path(){return m.Config},component:pt}),t(y,{path:"*",get element(){return t(Se,{get href(){return m.Overview}})}})]}}),t(y,{path:"/setup",component:at})]}})),E(()=>k(r,"data-theme",je())),r})()},gt={add:"Add",overview:"Overview",proxies:"Proxies",rules:"Rules",connections:"Connections",logs:"Logs",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",chains:"Chains",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",source:"Source",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",proxiesPreviewType:"Proxies preview type",urlForDelayTest:"Url for delay test",autoCloseConns:"Automatically close all connections",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render Proxies in two columns"},ft={add:"添加",overview:"概览",proxies:"代理",rules:"规则",connections:"连接",logs:"日志",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",chains:"链路",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",source:"源地址",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",proxiesPreviewType:"节点组预览样式",urlForDelayTest:"测速链接",autoCloseConns:"切换代理时自动断开全部连接",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"节点双列渲染"},K={[_.EN]:gt,[_.ZH]:ft},ee=()=>{const[e,r]=g(p(Reflect.has(K,navigator.language)?navigator.language:_.EN),{name:"lang",storage:localStorage});return{lang:e,setLang:r}},vt=e=>{const{setLang:r}=ee(),[s,{locale:d}]=z();return q(()=>{r(d())}),e.children},yt=e=>{const{lang:r}=ee(),s=$e(K,r());return t(De.Provider,{value:s,get children(){return t(vt,{get children(){return e.children}})}})},wt=document.getElementById("root");Ie(()=>t(yt,{get children(){return t(Ne,{get source(){return Le()},get children(){return t(ht,{})}})}}),wt);export{J as A,ke as D,W as P,Fe as a,Pt as b,bt as c,Y as d,Ue as e,Ot as f,It as g,Ve as h,Re as i,He as j,Nt as k,qe as l,Lt as m,ze as n,Tt as o,St as p,Dt as q,Et as r,_t as s,Be as t,Me as u,$t as v,Ct as w,Ge as x,Ae as y};
