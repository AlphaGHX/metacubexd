import{m as _,c as h,k as ne,d as se,u as q,o as z,a as ae,b as ie,e as V,i as m,f as t,I as le,A as Q,F as N,S as Z,g as ce,h as de,j as E,l as ue,t as pe,n as P,s as O,p as me,q as he,r as ge,v as fe,w as ve,x as ye,y as xe,z as we,R as f,N as be,B as _e,C as x,D as Pe,E as Ce,G as $e,H as Se,J as Le,K as De}from"./vendor-a821092a.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();const Ie="modulepreload",Ne=function(e,r){return new URL(e,r).href},U={},w=function(r,s,u){if(!s||s.length===0)return r();const a=document.getElementsByTagName("link");return Promise.all(s.map(o=>{if(o=Ne(o,u),o in U)return;U[o]=!0;const d=o.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(!!u)for(let c=a.length-1;c>=0;c--){const l=a[c];if(l.href===o&&(!d||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${v}`))return;const n=document.createElement("link");if(n.rel=d?"stylesheet":Ie,d||(n.as="script",n.crossOrigin=""),n.href=o,document.head.appendChild(n),d)return new Promise((c,l)=>{n.addEventListener("load",c),n.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r()).catch(o=>{const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=o,window.dispatchEvent(d),!d.defaultPrevented)throw o})};var p=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Proxyprovider="/proxyprovider",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e))(p||{}),Ee=(e=>(e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.Source="source",e.Destination="destination",e))(Ee||{}),Te=(e=>(e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(Te||{}),J=(e=>(e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(J||{}),b=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(b||{});const Oe=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],[T,ke]=_(h(""),{name:"selectedEndpoint",storage:localStorage}),[Re,gt]=_(h([]),{name:"endpointList",storage:localStorage}),[Be,Me]=_(h("halloween"),{name:"theme",storage:localStorage}),k=()=>Re().find(({id:e})=>e===T()),ft=()=>{var e;return(e=k())==null?void 0:e.secret},vt=()=>{var e;return(e=k())==null?void 0:e.url.replace("http","ws")},Ue=()=>{const e=k();return ne.create({prefixUrl:e==null?void 0:e.url,headers:{Authorization:e!=null&&e.secret?`Bearer ${e.secret}`:""}})},[yt,xt]=_(h(J.BAR),{name:"proxiesPreviewType",storage:localStorage}),[Ge,wt]=_(h("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),[He,bt]=_(h(!1),{name:"autoCloseConns",storage:localStorage}),[G,H]=h([]),[F,Fe]=h([]),[I,j]=h({}),[A,je]=h({});function Ae(){const e=Ue(),r=i=>{i.forEach(n=>{var l;const c=((l=n.history.at(-1))==null?void 0:l.delay)??0;je({...A(),[n.name]:{udp:n.udp,type:n.type,name:n.name}}),j({...I(),[n.name]:c})})},s=async()=>{const{providers:i}=await e.get("providers/proxies").json();Object.values(i).forEach(l=>{r(l.proxies)}),Fe(Object.values(i).filter(l=>l.name!=="default"&&l.vehicleType!=="Compatible"));const{proxies:n}=await e.get("proxies").json(),c=[...n.GLOBAL.all??[],"GLOBAL"];r(Object.values(n)),H(Object.values(n).filter(l=>{var g;return(g=l.all)==null?void 0:g.length}).sort((l,g)=>c.indexOf(l.name)-c.indexOf(g.name)))};return{proxies:G,proxyProviders:F,delayTestByProxyGroupName:async i=>{const n=await e.get(`group/${i}/delay`,{searchParams:{url:Ge(),timeout:2e3}}).json();j({...I(),...n})},delayMap:I,proxyNodeMap:A,updateProxy:s,setProxyGroupByProxyName:async(i,n)=>{const c=G().slice(),l=c.find(g=>g.name===i.name);He()&&e.delete("connections"),await e.put(`proxies/${i.name}`,{body:JSON.stringify({name:n})}),l.now=n,H(c),queueMicrotask(s)},updateProviderByProviderName:async i=>{await e.put(`providers/proxies/${i}`),await s()},updateAllProvider:async()=>{await Promise.all(F().map(i=>e.put(`providers/proxies/${i.name}`))),await s()},healthCheckByProviderName:async i=>{await e.get(`providers/proxies/${i}/healthcheck`,{timeout:30*1e3}),await s()}}}const qe=P('<li class="tooltip tooltip-bottom">'),ze=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-box gap-2 bg-base-300 p-2 shadow">'),Ve=P('<li class="btn btn-xs">'),Qe=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal gap-2">'),Ze=P('<ul class="navbar rounded-box sticky inset-x-0 top-2 z-10 mx-2 mt-2 flex w-auto items-center justify-center bg-base-300 px-4"><div class="navbar-start gap-4"><div><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-box min-h-full w-2/5 gap-2 bg-base-300 pt-20 shadow"></ul></div></div><a class="text-xl font-bold normal-case" href="https://github.com/metacubex/metacubexd" target="_blank">metacubexd</a></div><div class="navbar-end"><div class="flex items-center gap-2"><button class="btn btn-circle btn-sm"></button><button class="btn btn-circle btn-secondary btn-sm">'),Je=P("<li>"),We=({href:e,tooltip:r,children:s})=>(()=>{const u=qe();return O(u,"data-tip",r),m(u,t(Q,{class:"rounded-box",href:e,children:s})),u})(),Xe=()=>(()=>{const e=ze(),r=e.firstChild,s=r.nextSibling,u=s.firstChild,a=s.nextSibling,o=a.firstChild,d=o.nextSibling;return m(u,t(me,{})),m(d,t(N,{each:Oe,children:v=>(()=>{const i=Ve();return i.$$click=()=>Me(v),O(i,"data-theme",v),m(i,v),i})()})),e})(),Ye=()=>{const[e,{locale:r}]=q(),{updateProxy:s,proxyProviders:u}=Ae();z(()=>{s()});const a=ae(()=>{const c=[{href:p.Overview,name:e("overview"),icon:t(he,{})},{href:p.Proxies,name:e("proxies"),icon:t(ge,{})},{href:p.Rules,name:e("rules"),icon:t(fe,{})},{href:p.Conns,name:e("connections"),icon:t(ve,{})},{href:p.Log,name:e("logs"),icon:t(ye,{})},{href:p.Config,name:e("config"),icon:t(xe,{})}];return u().length>0&&c.splice(2,0,{href:p.Proxyprovider,name:e("proxyProviders"),icon:t(we,{})}),c}),o=ie(),d=V(),[v,i]=h(!1),n=()=>{ke(""),d("/setup")};return(()=>{const c=Ze(),l=c.firstChild,g=l.firstChild,$=g.firstChild,R=$.nextSibling,Y=R.firstChild,K=R.nextSibling,ee=K.firstChild,te=ee.nextSibling,B=l.nextSibling,M=B.firstChild,S=M.firstChild,L=S.nextSibling;return $.addEventListener("change",y=>i(y.target.checked)),m(Y,t(le,{})),m(te,t(N,{get each(){return a()},children:({href:y,name:D})=>(()=>{const C=Je();return C.$$click=()=>i(!1),m(C,t(Q,{href:y,children:D})),C})()})),m(c,t(Z,{get when(){return o.pathname!=="/setup"},get children(){const y=Qe(),D=y.firstChild;return m(D,t(N,{get each(){return a()},children:({href:C,name:re,icon:oe})=>t(We,{href:C,tooltip:re,children:oe})})),y}}),B),S.$$click=()=>{const y=r();r(y===b.EN?b.ZH:b.EN)},m(S,t(ce,{})),m(M,t(Xe,{}),L),L.$$click=n,m(L,t(de,{})),E(()=>ue(g,pe("drawer w-auto lg:hidden",""))),E(()=>$.checked=v()),c})()};se(["click"]);const Ke=P('<div class="relative flex h-screen flex-col subpixel-antialiased"><div class="flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4">'),et=x(()=>w(()=>import("./Setup-f23b9953.js"),["./Setup-f23b9953.js","./vendor-a821092a.js","./index-23343ee3.js"],import.meta.url)),tt=x(()=>w(()=>import("./Overview-0f8f02fe.js"),["./Overview-0f8f02fe.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-ac54fc13.js"],import.meta.url)),rt=x(()=>w(()=>import("./Connections-aa0c2622.js"),["./Connections-aa0c2622.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-6c81a447.js","./index-ac54fc13.js"],import.meta.url)),ot=x(()=>w(()=>import("./Logs-20a7fd85.js"),["./Logs-20a7fd85.js","./vendor-a821092a.js","./index-f4fc6973.js","./index-6c81a447.js"],import.meta.url)),nt=x(()=>w(()=>import("./Proxies-0ce34607.js"),["./Proxies-0ce34607.js","./vendor-a821092a.js","./ProxyNodePreview-2e250ae4.js","./index-d4e52c73.js"],import.meta.url)),st=x(()=>w(()=>import("./ProxyProvider-9ea4347d.js"),["./ProxyProvider-9ea4347d.js","./vendor-a821092a.js","./ProxyNodePreview-2e250ae4.js","./index-d4e52c73.js","./index-ac54fc13.js"],import.meta.url)),at=x(()=>w(()=>import("./Rules-c6c3b9f4.js"),["./Rules-c6c3b9f4.js","./vendor-a821092a.js","./index-d4e52c73.js"],import.meta.url)),it=x(()=>w(()=>import("./Config-2721d67a.js"),["./Config-2721d67a.js","./vendor-a821092a.js","./index-23343ee3.js"],import.meta.url)),lt=()=>{const e=V();return z(async()=>{T()||e("/setup")}),(()=>{const r=Ke(),s=r.firstChild;return m(r,t(Ye,{}),s),m(s,t(_e,{get children(){return[t(Z,{get when(){return T()},get children(){return[t(f,{get path(){return p.Overview},component:tt}),t(f,{get path(){return p.Proxies},component:nt}),t(f,{get path(){return p.Proxyprovider},component:st}),t(f,{get path(){return p.Rules},component:at}),t(f,{get path(){return p.Conns},component:rt}),t(f,{get path(){return p.Log},component:ot}),t(f,{get path(){return p.Config},component:it}),t(f,{path:"*",get element(){return t(be,{get href(){return p.Overview}})}})]}}),t(f,{path:"/setup",component:et})]}})),E(()=>O(r,"data-theme",Be())),r})()},ct={add:"Add",overview:"Overview",proxies:"Proxies",rules:"Rules",connections:"Connections",logs:"Logs",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",chains:"Chains",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",source:"Source",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",proxiesPreviewType:"Proxies preview type",urlForDelayTest:"Url for delay test",autoCloseConns:"Automatically close all connections"},dt={add:"添加",overview:"概览",proxies:"代理",rules:"规则",connections:"连接",logs:"日志",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",chains:"链路",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",source:"源地址",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",proxiesPreviewType:"节点组预览样式",urlForDelayTest:"测速链接",autoCloseConns:"切换代理时自动断开全部连接"},W={[b.EN]:ct,[b.ZH]:dt},X=()=>{const[e,r]=_(h(Reflect.has(W,navigator.language)?navigator.language:b.EN),{name:"lang",storage:localStorage});return{lang:e,setLang:r}},ut=e=>{const{setLang:r}=X(),[s,{locale:u}]=q();return $e(()=>{r(u())}),e.children},pt=e=>{const{lang:r}=X(),s=Pe(W,r());return t(Ce.Provider,{value:s,get children(){return t(ut,{get children(){return e.children}})}})},mt=document.getElementById("root");Se(()=>t(pt,{get children(){return t(Le,{get source(){return De()},get children(){return t(lt,{})}})}}),mt);export{Ee as A,Te as D,J as P,ke as a,ft as b,Ae as c,xt as d,Re as e,bt as f,wt as g,He as h,Ge as i,yt as p,gt as s,Ue as u,vt as w};
