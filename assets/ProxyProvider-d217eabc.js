import{h as P,i as r,b as p,W as _,ad as L,u as B,e as E,c as l,ae as b,ac as N,S as y}from"./vendor-1926fad9.js";import{f as F,B as x,g as T,F as U}from"./index-732f3e54.js";import{P as D,a as M}from"./ProxyPreviewDots-362941c8.js";import{f as Y,g as f}from"./proxies-575a9e23.js";const A=p('<progress class="progress" max="100">'),j=p('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),I=p('<div class="text-sm text-slate-500">Expire: <!> '),R=n=>{const i=_(n.Total,{units:"iec"}),t=_(n.Download+n.Upload,{units:"iec"}),c=((n.Download+n.Upload)/n.Total*100).toFixed(2);return{total:i,used:t,percentage:c,expireStr:()=>n.Expire===0?"Null":L(n.Expire*1e3).format("YYYY-MM-DD")}},z=n=>{if(!n.subscriptionInfo)return;const i=R(n.subscriptionInfo);return[(()=>{const t=A();return P(()=>t.value=i.percentage),t})(),(()=>{const t=j(),c=t.firstChild,m=c.nextSibling,d=m.nextSibling,u=d.nextSibling;return u.nextSibling,r(t,()=>`${i.used}`,c),r(t,()=>`${i.total}`,m),r(t,()=>i.percentage,u),t})(),(()=>{const t=I(),c=t.firstChild,m=c.nextSibling;return m.nextSibling,r(t,()=>i.expireStr(),m),t})()]},G=p('<div class="flex flex-col gap-2"><h1 class="flex h-8 items-center pb-2 text-lg font-semibold">'),H=p('<div class="mr-8 flex items-center justify-between"><span></span><div>'),O=p('<div class="text-sm text-slate-500"> :: Updated '),Q=()=>{const[n]=B(),{proxyProviders:i,updateProviderByProviderName:t,updateAllProvider:c,healthCheckByProviderName:m}=F(),[d,u]=E({}),C=async(a,o)=>{const e=f(a);e.classList.add("animate-pulse"),a.stopPropagation(),await m(o),e.classList.remove("animate-pulse")},S=async(a,o)=>{const e=f(a);e.classList.add("animate-spin"),a.stopPropagation(),await t(o),e.classList.remove("animate-spin")},v=async a=>{const o=f(a);o.classList.add("animate-spin"),a.stopPropagation(),await c(),o.classList.remove("animate-spin")};return(()=>{const a=G(),o=a.firstChild;return r(o,()=>n("proxyProviders"),null),r(o,l(x,{class:"btn-circle btn-ghost btn-sm ml-2",onClick:e=>v(e),get children(){return l(b,{})}}),null),r(a,l(U,{get subChild(){return i().map(e=>{const w=[(()=>{const s=H(),g=s.firstChild,h=g.nextSibling;return r(g,()=>e.name),r(h,l(x,{class:"btn btn-circle btn-sm mr-2",onClick:$=>S($,e.name),get children(){return l(b,{})}}),null),r(h,l(x,{class:"btn btn-circle btn-sm",onClick:$=>C($,e.name),get children(){return l(N,{})}}),null),s})(),l(z,{get subscriptionInfo(){return e.subscriptionInfo}}),(()=>{const s=O(),g=s.firstChild;return r(s,()=>e.vehicleType,g),r(s,()=>Y(e.updatedAt),null),s})(),l(y,{get when(){return!d()[`provider-${e.name}`]},get children(){return l(D,{get proxyNameList(){return e.proxies.map(s=>s.name)??[]}})}})],k=l(M,{get proxies(){return e.proxies.map(s=>s.name)}});return l(T,{get isOpen(){return d()[`provider-${e.name}`]},title:w,content:k,onCollapse:s=>u({...d(),[`provider-${e.name}`]:s})})})}}),null),a})()};export{Q as default};
