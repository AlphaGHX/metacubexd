var ke=Object.defineProperty;var Me=(e,r,t)=>r in e?ke(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var Q=(e,r,t)=>(Me(e,typeof r!="symbol"?r+"":r,t),t);import{L as Pe,U as Ie,e as S,Q as ue,S as Ae,i as P,h as te,j as De,V as Re,W as je,D as N,X as K,l as L,Y as Se,Z as we,x as oe,O as re,J as Ce,c as z,_ as X,F as ee,u as Fe,m as pe,$ as me,w as Te,a0 as Ke,a1 as Le,a2 as qe,t as Ve,s as Ne,d as We}from"./vendor-48c5660e.js";import{c as Ue,a as Xe}from"./index-5e4b6e89.js";import{c as ze,f as ye,g as Be,a as He}from"./index-4fc58763.js";import{b as ne}from"./index-ac54fc13.js";import{A as R}from"./enum-cbdb10ae.js";import{u as Ye,w as Je,b as Ze}from"./index-a3c26ddc.js";const he="[a-fA-F\\d:]",B=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${he})|(?<=${he})(?=\\s|$))`:"",V="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",D="[a-fA-F\\d]{1,4}",se=`
(?:
(?:${D}:){7}(?:${D}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${D}:){6}(?:${V}|:${D}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${D}:){5}(?::${V}|(?::${D}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${D}:){4}(?:(?::${D}){0,1}:${V}|(?::${D}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${D}:){3}(?:(?::${D}){0,2}:${V}|(?::${D}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${D}:){2}(?:(?::${D}){0,3}:${V}|(?::${D}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${D}:){1}(?:(?::${D}){0,4}:${V}|(?::${D}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${D}){0,5}:${V}|(?::${D}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ge=new RegExp(`(?:^${V}$)|(?:^${se}$)`),Qe=new RegExp(`^${V}$`),et=new RegExp(`^${se}$`),ge=e=>e&&e.exact?Ge:new RegExp(`(?:${B(e)}${V}${B(e)})|(?:${B(e)}${se}${B(e)})`,"g");ge.v4=e=>e&&e.exact?Qe:new RegExp(`${B(e)}${V}${B(e)}`,"g");ge.v6=e=>e&&e.exact?et:new RegExp(`${B(e)}${se}${B(e)}`,"g");function tt(e){const r=(...t)=>e(...t);return Object.defineProperty(r,"name",{value:`functionTimeout(${e.name||"<anonymous>"})`,configurable:!0}),r}const{toString:rt}=Object.prototype;function at(e){return rt.call(e)==="[object RegExp]"}const xe={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function nt(e,r={}){if(!at(e))throw new TypeError("Expected a RegExp instance");const t=Object.keys(xe).map(l=>(typeof r[l]=="boolean"?r[l]:e[l])?xe[l]:"").join(""),o=new RegExp(r.source||e.source,t);return o.lastIndex=typeof r.lastIndex=="number"?r.lastIndex:e.lastIndex,o}function ot(e,r,{timeout:t}={}){try{return tt(()=>nt(e).test(r),{timeout:t})()}catch(o){throw o}}const st=45,lt={timeout:400};function ct(e){return e.length>st?!1:ot(ge.v6({exact:!0}),e,lt)}const it=L("<div>");var le=class{constructor(e){Q(this,"x");Q(this,"y");Q(this,"width");Q(this,"height");this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},G=e=>{let r=new le(e.getBoundingClientRect());const{transform:t}=getComputedStyle(e);return t&&(r=dt(r,t)),r},dt=(e,r)=>{let t,o;if(r.startsWith("matrix3d(")){const l=r.slice(9,-1).split(/, /);t=+l[12],o=+l[13]}else if(r.startsWith("matrix(")){const l=r.slice(7,-1).split(/, /);t=+l[4],o=+l[5]}else t=0,o=0;return new le({...e,x:e.x-t,y:e.y-o})},W=()=>({x:0,y:0}),ve=(e,r)=>e.x===r.x&&e.y===r.y,ie=(e,r)=>new le({...e,x:e.x+r.x,y:e.y+r.y}),ut=(e,r)=>Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)),gt=(e,r)=>{const t=Math.max(e.top,r.top),o=Math.max(e.left,r.left),l=Math.min(e.right,r.right),f=Math.min(e.bottom,r.bottom),i=l-o,p=f-t;if(o<l&&t<f){const c=e.width*e.height,b=r.width*r.height,d=i*p;return d/(c+b-d)}return 0},de=(e,r)=>e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height,vt=(e,r,t)=>{const o=e.transformed.center,l={distance:1/0,droppable:null};for(const f of r){const i=ut(o,f.layout.center);i<l.distance?(l.distance=i,l.droppable=f):i===l.distance&&f.id===t.activeDroppableId&&(l.droppable=f)}return l.droppable},bt=(e,r,t)=>{const o=e.transformed,l={ratio:0,droppable:null};for(const f of r){const i=gt(o,f.layout);i>l.ratio?(l.ratio=i,l.droppable=f):i>0&&i===l.ratio&&f.id===t.activeDroppableId&&(l.droppable=f)}return l.droppable},_e=Se(),ft=e=>{const r=Pe({collisionDetector:bt},e),[t,o]=Ie({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return t.active.draggableId!==null?t.draggables[t.active.draggableId]:null},droppableId:null,get droppable(){return t.active.droppableId!==null?t.droppables[t.active.droppableId]:null},sensorId:null,get sensor(){return t.active.sensorId!==null?t.sensors[t.active.sensorId]:null},overlay:null}}),l=(a,s,u)=>{a.substring(0,a.length-1),K(()=>t[a][s])&&o(a,s,"transformers",u.id,u)},f=(a,s,u)=>{a.substring(0,a.length-1),K(()=>t[a][s])&&K(()=>t[a][s].transformers[u])&&o(a,s,"transformers",u,void 0)},i=({id:a,node:s,layout:u,data:A})=>{const g=t.draggables[a],v={id:a,node:s,layout:u,data:A,_pendingCleanup:!1};let $;if(!g)Object.defineProperties(v,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(t.active.overlay)return W();const k=Object.values(t.draggables[a].transformers);return k.sort((q,Z)=>q.order-Z.order),k.reduce((q,Z)=>Z.callback(q),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>ie(t.draggables[a].layout,t.draggables[a].transform)}});else if(t.active.draggableId===a&&!t.active.overlay){const k={x:g.layout.x-u.x,y:g.layout.y-u.y},q="addDraggable-existing-offset",Z=g.transformers[q],be=Z?Z.callback(k):k;$={id:q,order:100,callback:fe=>({x:fe.x+be.x,y:fe.y+be.y})},T(()=>f("draggables",a,q))}X(()=>{o("draggables",a,v),$&&l("draggables",a,$)}),t.active.draggable&&_()},p=a=>{K(()=>t.draggables[a])&&(o("draggables",a,"_pendingCleanup",!0),queueMicrotask(()=>c(a)))},c=a=>{var s;if((s=t.draggables[a])!=null&&s._pendingCleanup){const u=t.active.draggableId===a;X(()=>{u&&o("active","draggableId",null),o("draggables",a,void 0)})}},b=({id:a,node:s,layout:u,data:A})=>{const g=t.droppables[a],v={id:a,node:s,layout:u,data:A,_pendingCleanup:!1};g||Object.defineProperties(v,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const $=Object.values(t.droppables[a].transformers);return $.sort((k,q)=>k.order-q.order),$.reduce((k,q)=>q.callback(k),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>ie(t.droppables[a].layout,t.droppables[a].transform)}}),o("droppables",a,v),t.active.draggable&&_()},d=a=>{K(()=>t.droppables[a])&&(o("droppables",a,"_pendingCleanup",!0),queueMicrotask(()=>m(a)))},m=a=>{var s;if((s=t.droppables[a])!=null&&s._pendingCleanup){const u=t.active.droppableId===a;X(()=>{u&&o("active","droppableId",null),o("droppables",a,void 0)})}},I=({id:a,activators:s})=>{o("sensors",a,{id:a,activators:s,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:t.sensors[a].coordinates.current.x-t.sensors[a].coordinates.origin.x,y:t.sensors[a].coordinates.current.y-t.sensors[a].coordinates.origin.y}}}})},C=a=>{if(!K(()=>t.sensors[a]))return;const s=t.active.sensorId===a;X(()=>{s&&o("active","sensorId",null),o("sensors",a,void 0)})},x=({node:a,layout:s})=>{const u=t.active.overlay,A={node:a,layout:s};u||Object.defineProperties(A,{id:{enumerable:!0,configurable:!0,get:()=>{var g;return(g=t.active.draggable)==null?void 0:g.id}},data:{enumerable:!0,configurable:!0,get:()=>{var g;return(g=t.active.draggable)==null?void 0:g.data}},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(t.active.draggable?t.active.draggable.transformers:{}).filter(([g])=>g!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const g=Object.values(t.active.overlay?t.active.overlay.transformers:[]);return g.sort((v,$)=>v.order-$.order),g.reduce((v,$)=>$.callback(v),W())}},transformed:{enumerable:!0,configurable:!0,get:()=>t.active.overlay?ie(t.active.overlay.layout,t.active.overlay.transform):new le({x:0,y:0,width:0,height:0})}}),o("active","overlay",A)},M=()=>o("active","overlay",null),y=(a,s)=>{X(()=>{o("sensors",a,"coordinates",{origin:{...s},current:{...s}}),o("active","sensorId",a)})},n=a=>{const s=t.active.sensorId;s&&o("sensors",s,"coordinates","current",{...a})},h=()=>o("active","sensorId",null),E=(a,s)=>{const u={};for(const g of Object.values(t.sensors))if(g)for(const[v,$]of Object.entries(g.activators))u[v]??(u[v]=[]),u[v].push({sensor:g,activator:$});const A={};for(const g in u){let v=g;s&&(v=`on${g}`),A[v]=$=>{for(const{activator:k}of u[g]){if(t.active.sensor)break;k($,a)}}}return A},_=()=>{let a=!1;const s=Object.values(t.draggables),u=Object.values(t.droppables),A=t.active.overlay;return X(()=>{const g=new WeakMap;for(const v of s)if(v){const $=v.layout;g.has(v.node)||g.set(v.node,G(v.node));const k=g.get(v.node);de($,k)||(o("draggables",v.id,"layout",k),a=!0)}for(const v of u)if(v){const $=v.layout;g.has(v.node)||g.set(v.node,G(v.node));const k=g.get(v.node);de($,k)||(o("droppables",v.id,"layout",k),a=!0)}if(A){const v=A.layout,$=G(A.node);de(v,$)||(o("active","overlay","layout",$),a=!0)}}),a},w=()=>{const a=t.active.overlay??t.active.draggable;if(a){const s=r.collisionDetector(a,Object.values(t.droppables),{activeDroppableId:t.active.droppableId}),u=s?s.id:null;t.active.droppableId!==u&&o("active","droppableId",u)}},O=a=>{const s={id:"sensorMove",order:0,callback:u=>t.active.sensor?{x:u.x+t.active.sensor.coordinates.delta.x,y:u.y+t.active.sensor.coordinates.delta.y}:u};_(),X(()=>{o("active","draggableId",a),l("draggables",a,s)}),w()},j=()=>{const a=K(()=>t.active.draggableId);X(()=>{a!==null&&f("draggables",a,"sensorMove"),o("active",["draggableId","droppableId"],null)}),_()},ae=a=>{N(()=>{const s=t.active.draggable;s&&K(()=>a({draggable:s}))})},F=a=>{N(()=>{const s=t.active.draggable;if(s){const u=K(()=>t.active.overlay);Object.values(u?u.transform:s.transform),K(()=>a({draggable:s,overlay:u}))}})},U=a=>{N(()=>{const s=t.active.draggable,u=t.active.droppable;s&&K(()=>a({draggable:s,droppable:u,overlay:t.active.overlay}))})},T=a=>{N(({previousDraggable:s,previousDroppable:u,previousOverlay:A})=>{const g=t.active.draggable,v=g?t.active.droppable:null,$=g?t.active.overlay:null;return!g&&s&&K(()=>a({draggable:s,droppable:u,overlay:A})),{previousDraggable:g,previousDroppable:v,previousOverlay:$}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};F(()=>w()),r.onDragStart&&ae(r.onDragStart),r.onDragMove&&F(r.onDragMove),r.onDragOver&&U(r.onDragOver),r.onDragEnd&&T(r.onDragEnd);const J=[t,{addTransformer:l,removeTransformer:f,addDraggable:i,removeDraggable:p,addDroppable:b,removeDroppable:d,addSensor:I,removeSensor:C,setOverlay:x,clearOverlay:M,recomputeLayouts:_,detectCollisions:w,draggableActivators:E,sensorStart:y,sensorMove:n,sensorEnd:h,dragStart:O,dragEnd:j,onDragStart:ae,onDragMove:F,onDragOver:U,onDragEnd:T}];return S(_e.Provider,{value:J,get children(){return r.children}})},H=()=>we(_e)||null,pt=(e="pointer-sensor")=>{const[r,{addSensor:t,removeSensor:o,sensorStart:l,sensorMove:f,sensorEnd:i,dragStart:p,dragEnd:c}]=H(),b=250,d=10;oe(()=>{t({id:e,activators:{pointerdown:M}})}),re(()=>{o(e)});const m=()=>r.active.sensorId===e,I={x:0,y:0};let C=null,x=null;const M=(w,O)=>{w.button===0&&(document.addEventListener("pointermove",h),document.addEventListener("pointerup",E),x=O,I.x=w.clientX,I.y=w.clientY,C=window.setTimeout(n,b))},y=()=>{C&&(clearTimeout(C),C=null),document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",E),document.removeEventListener("selectionchange",_)},n=()=>{r.active.sensor?m()||y():(l(e,I),p(x),_(),document.addEventListener("selectionchange",_))},h=w=>{const O={x:w.clientX,y:w.clientY};if(!r.active.sensor){const j={x:O.x-I.x,y:O.y-I.y};Math.sqrt(j.x**2+j.y**2)>d&&n()}m()&&(w.preventDefault(),f(O))},E=w=>{y(),m()&&(w.preventDefault(),c(),i())},_=()=>{var w;(w=window.getSelection())==null||w.removeAllRanges()}},mt=e=>(pt(),ue(()=>e.children)),ce=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),yt=(e,r={})=>{const[t,{addDraggable:o,removeDraggable:l,draggableActivators:f}]=H(),[i,p]=z(null);oe(()=>{const m=i();m&&o({id:e,node:m,layout:G(m),data:r})}),re(()=>l(e));const c=()=>t.active.draggableId===e,b=()=>{var m;return((m=t.draggables[e])==null?void 0:m.transform)||W()};return Object.defineProperties((m,I)=>{const C=I?I():{};N(()=>{const x=i(),M=f(e);if(x)for(const y in M)x.addEventListener(y,M[y]);re(()=>{if(x)for(const y in M)x.removeEventListener(y,M[y])})}),p(m),C.skipTransform||N(()=>{const x=b();if(ve(x,W()))m.style.removeProperty("transform");else{const M=ce(b());m.style.setProperty("transform",M.transform??null)}})},{ref:{enumerable:!0,value:p},isActiveDraggable:{enumerable:!0,get:c},dragActivators:{enumerable:!0,get:()=>f(e,!0)},transform:{enumerable:!0,get:b}})},ht=(e,r={})=>{const[t,{addDroppable:o,removeDroppable:l}]=H(),[f,i]=z(null);oe(()=>{const d=f();d&&o({id:e,node:d,layout:G(d),data:r})}),re(()=>l(e));const p=()=>t.active.droppableId===e,c=()=>{var d;return((d=t.droppables[e])==null?void 0:d.transform)||W()};return Object.defineProperties((d,m)=>{const I=m?m():{};i(d),I.skipTransform||N(()=>{const C=c();if(ve(C,W()))d.style.removeProperty("transform");else{const x=ce(c());d.style.setProperty("transform",x.transform??null)}})},{ref:{enumerable:!0,value:i},isActiveDroppable:{enumerable:!0,get:p},transform:{enumerable:!0,get:c}})},xt=e=>{const[r,{onDragStart:t,onDragEnd:o,setOverlay:l,clearOverlay:f}]=H();let i;t(({draggable:c})=>{l({node:c.node,layout:c.layout}),queueMicrotask(()=>{if(i){const b=G(i),d={x:(c.layout.width-b.width)/2,y:(c.layout.height-b.height)/2};b.x+=d.x,b.y+=d.y,l({node:i,layout:b})}})}),o(()=>queueMicrotask(f));const p=()=>{const c=r.active.overlay,b=r.active.draggable;return!c||!b?{}:{position:"fixed",transition:"transform 0s",top:`${c.layout.top}px`,left:`${c.layout.left}px`,"min-width":`${b.layout.width}px`,"min-height":`${b.layout.height}px`,...ce(c.transform),...e.style}};return S(je,{get mount(){return document.body},get children(){return S(Ae,{get when(){return r.active.draggable},get children(){const c=it(),b=i;return typeof b=="function"?Ce(b,c):i=c,P(c,(()=>{const d=ue(()=>typeof e.children=="function");return()=>d()?e.children(r.active.draggable):e.children})()),te(d=>{const m=e.class,I=p();return m!==d._v$&&De(c,d._v$=m),d._v$2=Re(c,I,d._v$2),d},{_v$:void 0,_v$2:void 0}),c}})}})},$t=(e,r,t)=>{const o=e.slice();return o.splice(t,0,...o.splice(r,1)),o},Oe=Se(),It=e=>{const[r]=H(),[t,o]=Ie({initialIds:[],sortedIds:[]}),l=p=>p>=0&&p<t.initialIds.length;N(()=>{o("initialIds",[...e.ids]),o("sortedIds",[...e.ids])}),N(()=>{r.active.draggableId&&r.active.droppableId?K(()=>{const p=t.sortedIds.indexOf(r.active.draggableId),c=t.initialIds.indexOf(r.active.droppableId);if(!l(p)||!l(c))o("sortedIds",[...e.ids]);else if(p!==c){const b=$t(t.sortedIds,p,c);o("sortedIds",b)}}):o("sortedIds",[...e.ids])});const i=[t,{}];return S(Oe.Provider,{value:i,get children(){return e.children}})},Dt=()=>we(Oe)||null,St=(e,r)=>t=>{e(t),r(t)},wt=(e,r={})=>{const[t,{addTransformer:o,removeTransformer:l}]=H(),[f]=Dt(),i=yt(e,r),p=ht(e,r),c=St(i.ref,p.ref),b=()=>f.initialIds.indexOf(e),d=()=>f.sortedIds.indexOf(e),m=y=>{var n;return((n=t.droppables[y])==null?void 0:n.layout)||null},I=()=>{const y=W(),n=b(),h=d();if(h!==n){const E=m(e),_=m(f.initialIds[h]);E&&_&&(y.x=_.x-E.x,y.y=_.y-E.y)}return y},C={id:"sortableOffset",order:100,callback:y=>{const n=I();return{x:y.x+n.x,y:y.y+n.y}}};oe(()=>o("droppables",e,C)),re(()=>l("droppables",e,C.id));const x=()=>{var y,n;return(e===t.active.draggableId&&!t.active.overlay?(y=t.draggables[e])==null?void 0:y.transform:(n=t.droppables[e])==null?void 0:n.transform)||W()};return Object.defineProperties(y=>{i(y,()=>({skipTransform:!0})),p(y,()=>({skipTransform:!0})),N(()=>{const n=x();if(ve(n,W()))y.style.removeProperty("transform");else{const h=ce(x());y.style.setProperty("transform",h.transform??null)}})},{ref:{enumerable:!0,value:c},transform:{enumerable:!0,get:x},isActiveDraggable:{enumerable:!0,get:()=>i.isActiveDraggable},dragActivators:{enumerable:!0,get:()=>i.dragActivators},isActiveDroppable:{enumerable:!0,get:()=>p.isActiveDroppable}})};const Ct=L('<div class="sortable"><div class="m-1 flex cursor-grab justify-between p-1"><span class="select-none"></span><input type="checkbox" class="toggle">'),_t=L('<input type="checkbox" id="connection-modal" class="modal-toggle">'),Ot=L('<div class="column self-stretch">'),Et=L('<div class="sortable">'),kt=L('<div class="modal"><div class="modal-box w-80"></div><label class="modal-backdrop" for="connection-modal">'),Mt=e=>{const[r,t]=z(null),o=({draggable:i})=>t(i.id),l=({draggable:i,droppable:p})=>{if(i&&p){const c=e.order,b=c.indexOf(i.id),d=c.indexOf(p.id);if(b!==d){const m=c.slice();m.splice(d,0,...m.splice(b,1)),e.onOrderChange(m)}}},f=i=>{const p=i.key,c=wt(p),[b]=H();return(()=>{const d=Ct(),m=d.firstChild,I=m.firstChild,C=I.nextSibling;return Ce(c,d,()=>!0),P(I,p),C.addEventListener("change",x=>{e.onVisibleChange({...e.visible,[p]:x.target.checked})}),te(x=>{const M=!!c.isActiveDraggable,y=!!b.active.draggable;return M!==x._v$&&d.classList.toggle("opacity-25",x._v$=M),y!==x._v$2&&d.classList.toggle("transition-transform",x._v$2=y),x},{_v$:void 0,_v$2:void 0}),te(()=>C.checked=e.visible[p]),d})()};return[_t(),(()=>{const i=kt(),p=i.firstChild;return P(p,S(ft,{onDragStart:o,onDragEnd:l,collisionDetector:vt,get children(){return[S(mt,{}),(()=>{const c=Ot();return P(c,S(It,{get ids(){return e.order},get children(){return S(ee,{get each(){return e.order},children:b=>S(f,{key:b})})}})),c})(),S(xt,{get children(){const c=Et();return P(c,r),c}})]}})),i})()]},$e=L('<div class="flex h-full items-center"><button class="btn btn-circle btn-xs">'),Pt=L('<div class="flex flex-col gap-4"><div class="flex w-full"><input class="input input-primary mr-4 w-40 flex-1"><label for="connection-modal" class="btn btn-circle"></label></div><div class="overflow-x-auto whitespace-nowrap"><table class="table table-xs bg-base-200"><thead></thead><tbody>'),At=L("<tr>"),Rt=L('<th class="bg-base-300"><div>'),jt=L('<tr class="hover">'),Ft=L("<td>"),Ee=Object.values(R),Tt={...Object.fromEntries(Ee.map(e=>[e,!0])),[R.ID]:!1},Xt=()=>{const[e]=Fe(),[r,t]=pe(z(Tt),{name:"columnVisibility",storage:localStorage}),[o,l]=pe(z(Ee),{name:"columnOrder",storage:localStorage}),f=Ye(),[i,p]=z(""),c=Ue(`${Je()}/connections?token=${Ze()}`),b=Xe(c,"message"),[d,m]=z([]);N(()=>{var h;const n=(h=b())==null?void 0:h.data;n&&m(E=>{const _=new Map;return E.forEach(O=>_.set(O.id,O)),JSON.parse(n).connections.map(O=>{const j=_.get(O.id);return j?{...O,downloadSpeed:j.download?O.download-j.download:0,uploadSpeed:j.upload?O.upload-j.upload:0}:{...O,downloadSpeed:0,uploadSpeed:0}}).slice(-100)})});const I=n=>f.delete(`connections/${n}`),C=[{accessorKey:R.Close,header:()=>(()=>{const n=$e(),h=n.firstChild;return h.$$click=()=>f.delete("connections"),P(h,S(me,{size:"18"})),n})(),cell:({row:n})=>(()=>{const h=$e(),E=h.firstChild;return E.$$click=()=>I(n.id),P(E,S(me,{size:"18"})),h})()},{accessorKey:R.ID,accessorFn:n=>n.id},{accessorKey:R.Type,accessorFn:n=>`${n.metadata.type}(${n.metadata.network})`},{accessorKey:R.Process,accessorFn:n=>n.metadata.process||n.metadata.processPath.replace(/^.*[/\\](.*)$/,"$1")||"-"},{accessorKey:R.Host,accessorFn:n=>`${n.metadata.host?n.metadata.host:n.metadata.destinationIP}:${n.metadata.destinationPort}`},{accessorKey:R.Rule,accessorFn:n=>n.rulePayload?`${n.rule} :: ${n.rulePayload}`:n.rule},{accessorKey:R.Chains,accessorFn:n=>n.chains.slice().reverse().join(" :: ")},{accessorKey:R.DlSpeed,accessorFn:n=>`${ne(n.downloadSpeed)}/s`,sortingFn:(n,h)=>n.original.downloadSpeed-h.original.downloadSpeed},{accessorKey:R.ULSpeed,accessorFn:n=>`${ne(n.uploadSpeed)}/s`,sortingFn:(n,h)=>n.original.uploadSpeed-h.original.uploadSpeed},{accessorKey:R.Download,accessorFn:n=>ne(n.download),sortingFn:(n,h)=>n.original.download-h.original.download},{accessorKey:R.Upload,accessorFn:n=>ne(n.upload),sortingFn:(n,h)=>n.original.upload-h.original.upload},{accessorKey:R.Source,accessorFn:n=>ct(n.metadata.sourceIP)?`[${n.metadata.sourceIP}]:${n.metadata.sourcePort}`:`${n.metadata.sourceIP}:${n.metadata.sourcePort}`},{accessorKey:R.Destination,accessorFn:n=>n.metadata.remoteDestination||n.metadata.destinationIP||n.metadata.host}],[x,M]=z([{id:"ID",desc:!0}]),y=ze({state:{get columnOrder(){return o()},get sorting(){return x()},get columnVisibility(){return r()}},get data(){return i()?d().filter(n=>Object.values(n).some(h=>JSON.stringify(h).toLowerCase().includes(i().toLowerCase()))):d()},enableHiding:!0,columns:C,onSortingChange:M,getSortedRowModel:Be(),getCoreRowModel:He()});return(()=>{const n=Pt(),h=n.firstChild,E=h.firstChild,_=E.nextSibling,w=h.nextSibling,O=w.firstChild,j=O.firstChild,ae=j.nextSibling;return E.$$input=F=>p(F.target.value),P(_,S(Te,{})),P(h,S(Mt,{get order(){return o()},get visible(){return r()},onOrderChange:F=>{l([...F])},onVisibleChange:F=>t({...F})}),null),P(j,S(ee,{get each(){return y.getHeaderGroups()},children:F=>(()=>{const U=At();return P(U,S(ee,{get each(){return F.headers},children:T=>(()=>{const Y=Rt(),J=Y.firstChild;return Ke(J,"click",T.column.getToggleSortingHandler(),!0),P(J,(()=>{const a=ue(()=>!!T.isPlaceholder);return()=>a()?null:ye(T.column.columnDef.header,T.getContext())})(),null),P(J,()=>({asc:S(Le,{}),desc:S(qe,{})})[T.column.getIsSorted()]??null,null),te(()=>De(J,Ve("flex items-center justify-between",T.column.getCanSort()&&"cursor-pointer select-none"))),Y})()})),U})()})),P(ae,S(ee,{get each(){return y.getRowModel().rows},children:F=>(()=>{const U=jt();return P(U,S(ee,{get each(){return F.getVisibleCells()},children:T=>(()=>{const Y=Ft();return P(Y,()=>ye(T.column.columnDef.cell,T.getContext())),Y})()})),U})()})),te(()=>Ne(E,"placeholder",e("search"))),n})()};We(["click","input"]);export{Xt as default};
