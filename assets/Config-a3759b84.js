import{i as o,e as f,h as y,l as u,u as D,c as P,J as C,F as k,S as E,x as F,s as g,m as j}from"./vendor-f843f104.js";import{z as r,c as R,v as T}from"./index-60009942.js";import{P as b,u as w}from"./index-f954ad50.js";const A=u('<div class="flex flex-col p-4">'),B=u('<div class="flex items-center gap-2"><form class="contents"><input name="name" class="input input-bordered flex-1"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX</option></select><button type="submit" class="btn btn-primary">'),Q=u('<div class="py-2">'),q=u('<div><form class="contents">'),I=u('<div class="form-control w-64 max-w-xs"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),L=u('<div class="flex flex-col gap-4"><div><div>Proxies preview type:</div><div class="join"><label class="flex items-center">Bar<input class="radio m-4" aria-label="Bar" type="radio" name="proxiesPreviewType"></label><label class="flex items-center">Dots<input class="radio m-4" aria-label="Dots" type="radio" name="proxiesPreviewType">'),M=r.object({name:r.string(),type:r.string()}),N=()=>{const[n]=D(),i=w(),{form:a}=R({extend:T({schema:M}),onSubmit:async e=>{i.get("dns/query",{searchParams:{name:e.name,type:e.type}}).json().then(({Answer:t})=>d((t==null?void 0:t.map(({data:s})=>s))||[]))}}),[p,d]=P([]);return(()=>{const e=B(),t=e.firstChild,s=t.firstChild,m=s.nextSibling,c=m.nextSibling;return C(a,t,()=>a),o(c,()=>n("dnsQuery")),o(e,f(E,{get when(){return p().length>0},get children(){const _=A();return o(_,f(k,{get each(){return p()},children:x=>(()=>{const l=Q();return o(l,x),l})()})),_}}),null),e})()},O=r.object({port:r.number(),"socks-port":r.number(),"redir-port":r.number(),"tproxy-port":r.number(),"mixed-port":r.number()}),V=()=>{const n=w(),i=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:a,setInitialValues:p,reset:d}=R({extend:T({schema:O})});return F(async()=>{const e=await n.get("configs").json();p(e),d()}),(()=>{const e=q(),t=e.firstChild;return C(a,t,()=>a),o(t,f(k,{each:i,children:s=>(()=>{const m=I(),c=m.firstChild,_=c.firstChild,x=c.nextSibling;return o(_,()=>s.label),y(l=>{const $=s.key,h=s.label;return $!==l._v$&&g(x,"name",l._v$=$),h!==l._v$2&&g(x,"placeholder",l._v$2=h),l},{_v$:void 0,_v$2:void 0}),m})()})),e})()},[v,S]=j(P(b.BAR),{name:"proxiesPreviewType",storage:localStorage}),J=()=>(()=>{const n=L(),i=n.firstChild,a=i.firstChild,p=a.nextSibling,d=p.firstChild,e=d.firstChild,t=e.nextSibling,s=d.nextSibling,m=s.firstChild,c=m.nextSibling;return o(n,f(N,{}),i),o(n,f(V,{}),i),t.addEventListener("change",()=>S(b.BAR)),c.addEventListener("change",()=>S(b.DOTS)),y(()=>t.checked=b.BAR===v()),y(()=>c.checked=b.DOTS===v()),n})();export{J as default,v as proxiesPreviewType,S as setProxiesPreviewType};
