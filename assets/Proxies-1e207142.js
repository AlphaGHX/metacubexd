import{i as y,f as rt,t as et,g as Q,d as st,h as E,c as nt,L as gt,s as vt,v as yt,b as H,a3 as at,F as X,a4 as xt,S as _t}from"./vendor-c5e716b7.js";import{u as bt}from"./index-d842f6ea.js";import{b as ot}from"./index-ac54fc13.js";const wt=E('<div><div class="collapse-title text-xl font-medium"></div><div>'),Mt=u=>{const{title:M,content:f,onCollapse:g}=u,S=()=>{const x="collapse-open",d="collapse-close";return u.isOpen?x:d},C=()=>{const x="opacity-100",d="opacity-0";return u.isOpen?x:d};return(()=>{const x=wt(),d=x.firstChild,a=d.nextSibling;return d.$$click=()=>g(!u.isOpen),y(d,M),y(a,f),rt(s=>{const h=et(S(),"collapse collapse-arrow overflow-visible border-secondary bg-base-200"),m=et(C(),"collapse-content grid auto-rows-min grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4");return h!==s._v$&&Q(x,s._v$=h),m!==s._v$2&&Q(a,s._v$2=m),s},{_v$:void 0,_v$2:void 0}),x})()},lt=Mt;st(["click"]);const[St,Ct]=nt([]),[Dt,Ot]=nt([]),[tt,ct]=nt({});function ft(){const u=bt(),M=d=>{d.forEach(a=>{var s;ct({...tt(),[a.name]:{udp:a.udp,type:a.type,delay:((s=a.history.at(-1))==null?void 0:s.delay)??0,name:a.name}})})},f=async()=>{const{providers:d}=await u.get("providers/proxies").json();Object.values(d).forEach(h=>{M(h.proxies)}),Ot(Object.values(d).filter(h=>h.name!=="default"&&h.vehicleType!=="Compatible"));const{proxies:a}=await u.get("proxies").json(),s=[...a.GLOBAL.all??[],"GLOBAL"];M(Object.values(a)),Ct(Object.values(a).filter(h=>{var m;return(m=h.all)==null?void 0:m.length}).sort((h,m)=>s.indexOf(h.name)-s.indexOf(m.name)))};return{proxies:St,proxyProviders:Dt,delayTestByProxyGroupName:async d=>{const a=await u.get(`group/${d}/delay?url=https%3A%2F%2Fwww.gstatic.com%2Fgenerate_204&timeout=2000`).json();Object.entries(a).forEach(([s,h])=>{ct({...tt(),[s]:{...tt()[s],delay:h}})})},proxyNodeMap:tt,updateProxy:f,setProxyGroupByProxyName:async(d,a)=>{await u.put(`proxies/${d.name}`,{body:JSON.stringify({name:a})}),await f()},updateProviderByProviderName:async d=>{await u.put(`providers/proxies/${d}`),await f()},healthCheckByProviderName:async d=>{await u.get(`providers/proxies/${d}/healthcheck`,{timeout:30*1e3}),await f()}}}const Nt=E("<span>ms"),kt=E('<div><div class="truncate text-left"></div><div class="flex items-center justify-between gap-1"><div></div><div class="text-xs">'),ut=u=>{const{proxyName:M,isSelected:f,onClick:g}=u,{proxyNodeMap:S}=ft(),C=gt(()=>S()[M]),x=a=>{if(typeof a!="number"||a===0)return"";let s="text-green-500";return a>500?s="text-red-500":a>200&&(s="text-yellow-500"),(()=>{const h=Nt(),m=h.firstChild;return Q(h,s),y(h,a,m),h})()},d=(a="")=>{const s=a.toLowerCase();return s.includes("shadowsocks")?s.replace("shadowsocks","ss"):s};return(()=>{const a=kt(),s=a.firstChild,h=s.nextSibling,m=h.firstChild,F=m.nextSibling;return a.$$click=()=>g==null?void 0:g(),vt(a,"data-tip",M),y(s,M),y(m,()=>{var o;return d((o=C())==null?void 0:o.type)},null),y(m,()=>{var o;return((o=C())==null?void 0:o.udp)&&" :: udp"},null),y(F,()=>{var o;return x((o=C())==null?void 0:o.delay)}),rt(o=>{const _=et("card card-bordered tooltip tooltip-bottom card-compact flex gap-1 border-neutral-focus bg-neutral p-3 text-neutral-content",f&&"border-primary bg-primary-content text-primary",g&&"cursor-pointer"),D=et("truncate text-xs text-slate-500",f&&"text-primary");return _!==o._v$&&Q(a,o._v$=_),D!==o._v$2&&Q(m,o._v$2=D),o},{_v$:void 0,_v$2:void 0}),a})()};st(["click"]);var ht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mt(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var $t={exports:{}};(function(u,M){(function(f,g){u.exports=g()})(ht,function(){var f=1e3,g=6e4,S=36e5,C="millisecond",x="second",d="minute",a="hour",s="day",h="week",m="month",F="quarter",o="year",_="date",D="Invalid Date",W=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var n=["th","st","nd","rd"],t=i%100;return"["+i+(n[(t-20)%10]||n[t]||n[0])+"]"}},G=function(i,n,t){var r=String(i);return!r||r.length>=n?i:""+Array(n+1-r.length).join(t)+i},N={s:G,z:function(i){var n=-i.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+G(r,2,"0")+":"+G(e,2,"0")},m:function i(n,t){if(n.date()<t.date())return-i(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(r,m),l=t-e<0,c=n.clone().add(r+(l?-1:1),m);return+(-(r+(t-e)/(l?e-c:c-e))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:m,y:o,w:h,d:s,D:_,h:a,m:d,s:x,ms:C,Q:F}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},p="en",b={};b[p]=T;var B=function(i){return i instanceof I},j=function i(n,t,r){var e;if(!n)return p;if(typeof n=="string"){var l=n.toLowerCase();b[l]&&(e=l),t&&(b[l]=t,e=l);var c=n.split("-");if(!e&&c.length>1)return i(c[0])}else{var v=n.name;b[v]=n,e=v}return!r&&e&&(p=e),e||!r&&p},w=function(i,n){if(B(i))return i.clone();var t=typeof n=="object"?n:{};return t.date=i,t.args=arguments,new I(t)},$=N;$.l=j,$.i=B,$.w=function(i,n){return w(i,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var I=function(){function i(t){this.$L=j(t.locale,null,!0),this.parse(t)}var n=i.prototype;return n.parse=function(t){this.$d=function(r){var e=r.date,l=r.utc;if(e===null)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var c=e.match(W);if(c){var v=c[2]-1||0,O=(c[7]||"0").substring(0,3);return l?new Date(Date.UTC(c[1],v,c[3]||1,c[4]||0,c[5]||0,c[6]||0,O)):new Date(c[1],v,c[3]||1,c[4]||0,c[5]||0,c[6]||0,O)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return $},n.isValid=function(){return this.$d.toString()!==D},n.isSame=function(t,r){var e=w(t);return this.startOf(r)<=e&&e<=this.endOf(r)},n.isAfter=function(t,r){return w(t)<this.startOf(r)},n.isBefore=function(t,r){return this.endOf(r)<w(t)},n.$g=function(t,r,e){return $.u(t)?this[r]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,r){var e=this,l=!!$.u(r)||r,c=$.p(t),v=function(z,Y){var U=$.w(e.$u?Date.UTC(e.$y,Y,z):new Date(e.$y,Y,z),e);return l?U:U.endOf(s)},O=function(z,Y){return $.w(e.toDate()[z].apply(e.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(Y)),e)},P=this.$W,L=this.$M,A=this.$D,Z="set"+(this.$u?"UTC":"");switch(c){case o:return l?v(1,0):v(31,11);case m:return l?v(1,L):v(0,L+1);case h:var J=this.$locale().weekStart||0,R=(P<J?P+7:P)-J;return v(l?A-R:A+(6-R),L);case s:case _:return O(Z+"Hours",0);case a:return O(Z+"Minutes",1);case d:return O(Z+"Seconds",2);case x:return O(Z+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,r){var e,l=$.p(t),c="set"+(this.$u?"UTC":""),v=(e={},e[s]=c+"Date",e[_]=c+"Date",e[m]=c+"Month",e[o]=c+"FullYear",e[a]=c+"Hours",e[d]=c+"Minutes",e[x]=c+"Seconds",e[C]=c+"Milliseconds",e)[l],O=l===s?this.$D+(r-this.$W):r;if(l===m||l===o){var P=this.clone().set(_,1);P.$d[v](O),P.init(),this.$d=P.set(_,Math.min(this.$D,P.daysInMonth())).$d}else v&&this.$d[v](O);return this.init(),this},n.set=function(t,r){return this.clone().$set(t,r)},n.get=function(t){return this[$.p(t)]()},n.add=function(t,r){var e,l=this;t=Number(t);var c=$.p(r),v=function(L){var A=w(l);return $.w(A.date(A.date()+Math.round(L*t)),l)};if(c===m)return this.set(m,this.$M+t);if(c===o)return this.set(o,this.$y+t);if(c===s)return v(1);if(c===h)return v(7);var O=(e={},e[d]=g,e[a]=S,e[x]=f,e)[c]||1,P=this.$d.getTime()+t*O;return $.w(P,this)},n.subtract=function(t,r){return this.add(-1*t,r)},n.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||D;var l=t||"YYYY-MM-DDTHH:mm:ssZ",c=$.z(this),v=this.$H,O=this.$m,P=this.$M,L=e.weekdays,A=e.months,Z=e.meridiem,J=function(Y,U,V,K){return Y&&(Y[U]||Y(r,l))||V[U].slice(0,K)},R=function(Y){return $.s(v%12||12,Y,"0")},z=Z||function(Y,U,V){var K=Y<12?"AM":"PM";return V?K.toLowerCase():K};return l.replace(k,function(Y,U){return U||function(V){switch(V){case"YY":return String(r.$y).slice(-2);case"YYYY":return $.s(r.$y,4,"0");case"M":return P+1;case"MM":return $.s(P+1,2,"0");case"MMM":return J(e.monthsShort,P,A,3);case"MMMM":return J(A,P);case"D":return r.$D;case"DD":return $.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return J(e.weekdaysMin,r.$W,L,2);case"ddd":return J(e.weekdaysShort,r.$W,L,3);case"dddd":return L[r.$W];case"H":return String(v);case"HH":return $.s(v,2,"0");case"h":return R(1);case"hh":return R(2);case"a":return z(v,O,!0);case"A":return z(v,O,!1);case"m":return String(O);case"mm":return $.s(O,2,"0");case"s":return String(r.$s);case"ss":return $.s(r.$s,2,"0");case"SSS":return $.s(r.$ms,3,"0");case"Z":return c}return null}(Y)||c.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,r,e){var l,c=this,v=$.p(r),O=w(t),P=(O.utcOffset()-this.utcOffset())*g,L=this-O,A=function(){return $.m(c,O)};switch(v){case o:l=A()/12;break;case m:l=A();break;case F:l=A()/3;break;case h:l=(L-P)/6048e5;break;case s:l=(L-P)/864e5;break;case a:l=L/S;break;case d:l=L/g;break;case x:l=L/f;break;default:l=L}return e?l:$.a(l)},n.daysInMonth=function(){return this.endOf(m).$D},n.$locale=function(){return b[this.$L]},n.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),l=j(t,r,!0);return l&&(e.$L=l),e},n.clone=function(){return $.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},i}(),q=I.prototype;return w.prototype=q,[["$ms",C],["$s",x],["$m",d],["$H",a],["$W",s],["$M",m],["$y",o],["$D",_]].forEach(function(i){q[i[1]]=function(n){return this.$g(n,i[0],i[1])}}),w.extend=function(i,n){return i.$i||(i(n,I,w),i.$i=!0),w},w.locale=j,w.isDayjs=B,w.unix=function(i){return w(1e3*i)},w.en=b[p],w.Ls=b,w.p={},w})})($t);var Pt=$t.exports;const it=mt(Pt),Tt=E('<progress class="progress" max="100">'),Lt=E('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),jt=E('<div class="text-sm text-slate-500">Expire: <!> '),Bt=u=>{const M=ot(u.Total),f=ot(u.Download+u.Upload),g=((u.Download+u.Upload)/u.Total*100).toFixed(2);return{total:M,used:f,percentage:g,expireStr:()=>u.Expire===0?"Null":it(u.Expire*1e3).format("YYYY-MM-DD")}},Yt=u=>{if(!u.subscriptionInfo)return;const M=Bt(u.subscriptionInfo);return[(()=>{const f=Tt();return rt(()=>f.value=M.percentage),f})(),(()=>{const f=Lt(),g=f.firstChild,S=g.nextSibling,C=S.nextSibling,x=C.nextSibling;return x.nextSibling,y(f,()=>`${M.used}`,g),y(f,()=>`${M.total}`,S),y(f,()=>M.percentage,x),f})(),(()=>{const f=jt(),g=f.firstChild,S=g.nextSibling;return S.nextSibling,y(f,()=>M.expireStr(),S),f})()]};var pt={exports:{}};(function(u,M){(function(f,g){u.exports=g()})(ht,function(){return function(f,g,S){f=f||{};var C=g.prototype,x={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(s,h,m,F){return C.fromToBase(s,h,m,F)}S.en.relativeTime=x,C.fromToBase=function(s,h,m,F,o){for(var _,D,W,k=m.$locale().relativeTime||x,T=f.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],G=T.length,N=0;N<G;N+=1){var p=T[N];p.d&&(_=F?S(s).diff(m,p.d,!0):m.diff(s,p.d,!0));var b=(f.rounding||Math.round)(Math.abs(_));if(W=_>0,b<=p.r||!p.r){b<=1&&N>0&&(p=T[N-1]);var B=k[p.l];o&&(b=o(""+b)),D=typeof B=="string"?B.replace("%d",b):B(b,h,p.l,W);break}}if(h)return D;var j=W?k.future:k.past;return typeof j=="function"?j(D):j.replace("%s",D)},C.to=function(s,h){return d(s,h,this,!0)},C.from=function(s,h){return d(s,h,this)};var a=function(s){return s.$u?S.utc():S()};C.toNow=function(s){return this.to(a(this),s)},C.fromNow=function(s){return this.from(a(this),s)}}})})(pt);var Ht=pt.exports;const At=mt(Ht);it.extend(At);function Et(u){return it(u).fromNow()}const Ft=E('<h1 class="pb-4 text-lg font-semibold">Proxy Providers'),Gt=E('<div class="grid grid-cols-1 gap-2 sm:grid-cols-2">'),It=E('<div class="flex flex-col gap-4"><div><h1 class="pb-4 text-lg font-semibold">Proxies</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-2">'),Ut=E('<div class="flex items-center justify-between"><div class="flex flex-col"><span></span><div class="text-sm text-slate-500"> :: </div></div><button class="btn btn-circle btn-sm">'),dt=E("<div>"),Wt=E('<div class="flex items-center justify-between"><div class="flex flex-col gap-1"><span></span><div class="text-sm text-slate-500"> :: Updated </div></div><div class="flex flex-nowrap"><button class="btn btn-circle btn-sm mr-2"></button><button class="btn btn-circle btn-sm">'),qt=()=>{const{proxies:u,proxyProviders:M,updateProxy:f,setProxyGroupByProxyName:g,delayTestByProxyGroupName:S,updateProviderByProviderName:C,healthCheckByProviderName:x}=ft(),[d,a]=nt({});yt(async()=>{await f()});const s=async(o,_)=>{g(o,_)},h=async(o,_)=>{const D=o.target;D.classList.add("animate-pulse"),o.stopPropagation(),await S(_),D.classList.remove("animate-pulse")},m=async(o,_)=>{const D=o.target;D.classList.add("animate-pulse"),o.stopPropagation(),await x(_),D.classList.remove("animate-pulse")},F=async(o,_)=>{const D=o.target;D.classList.add("animate-spin"),o.stopPropagation(),await C(_),D.classList.remove("animate-spin")};return(()=>{const o=It(),_=o.firstChild,D=_.firstChild,W=D.nextSibling;return y(W,H(X,{get each(){return u()},children:k=>{const T=(()=>{const N=Ut(),p=N.firstChild,b=p.firstChild,B=b.nextSibling,j=B.firstChild,w=p.nextSibling;return y(b,()=>k.name),y(B,()=>k.type,j),y(B,()=>k.now,null),w.$$click=$=>h($,k.name),y(w,H(at,{})),N})(),G=H(X,{get each(){return k.all},children:N=>H(ut,{proxyName:N,get isSelected(){return k.now===N},onClick:()=>s(k,N)})});return(()=>{const N=dt();return y(N,H(lt,{get isOpen(){return d()[`group-${k.name}`]},title:T,content:G,onCollapse:p=>a({...d(),[`group-${k.name}`]:p})})),N})()}})),y(o,H(_t,{get when(){return M().length>0},get children(){return[Ft(),(()=>{const k=Gt();return y(k,H(X,{get each(){return M()},children:T=>{const G=(()=>{const p=Wt(),b=p.firstChild,B=b.firstChild,j=B.nextSibling,w=j.firstChild,$=b.nextSibling,I=$.firstChild,q=I.nextSibling;return y(B,()=>T.name),y(b,H(Yt,{get subscriptionInfo(){return T.subscriptionInfo}}),j),y(j,()=>T.vehicleType,w),y(j,()=>Et(T.updatedAt),null),I.$$click=i=>F(i,T.name),y(I,H(xt,{})),q.$$click=i=>m(i,T.name),y(q,H(at,{})),p})(),N=H(X,{get each(){return T.proxies},children:p=>H(ut,{get proxyName(){return p.name}})});return(()=>{const p=dt();return y(p,H(lt,{get isOpen(){return d()[`provider-${T.name}`]},title:G,content:N,onCollapse:b=>a({...d(),[`provider-${T.name}`]:b})})),p})()}})),k})()]}}),null),o})()};st(["click"]);export{qt as default};
