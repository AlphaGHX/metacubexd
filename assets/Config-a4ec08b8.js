import{i as e,e as n,h as g,u as B,c as U,M as W,F as y,S as Y,B as ee,f as c,s as q,z as te}from"./vendor-b4827f97.js";import{z as p,c as Z,v as J}from"./index-b76c2330.js";import{B as I}from"./Button-b7595b70.js";import{u as K,v as se,x as le,y as ne,z as ae,A as ie,B as re,E as ce,F as M,G as X,H as oe,I as H,J as de,K as ge,M as ue,N as pe,O as he,n as ve,Q as xe,R as be,S as me,T as fe,U as Q,l as _e,r as $e,V as Se,m as ye,p as Ce,t as we,b as ke,W as Ee}from"./index-1ae7cb74.js";const Te=g('<div class="flex flex-col p-4">'),Pe=g('<div class="flex flex-col"><form class="flex flex-col gap-2 sm:flex-row"><input name="name" class="input input-bordered w-full sm:flex-1"><div class="flex items-center gap-2"><select name="type" class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Le=g('<div class="py-2">'),Ie=g('<div class="flex flex-col gap-4"><form class="contents"></form><div class="flex flex-wrap items-center gap-2"></div><div class="flex flex-col"><div class="pb-4 text-lg font-semibold"></div><input class="w-100 input input-bordered max-w-md"></div><div><div class="pb-4 text-lg font-semibold"></div><input class="toggle" type="checkbox">'),Re=g('<div class="form-control w-64 max-w-sm"><label class="label"><span class="label-text"></span></label><input type="number" class="input input-bordered">'),V=g('<div class="flex flex-col"><div class="pb-4 text-lg font-semibold"></div><select class="select select-bordered w-full max-w-xs">'),Fe=g('<div class="grid gap-4"><div class="flex flex-col"><div class="pb-4 text-lg font-semibold"></div><input type="checkbox" class="toggle"></div><div class="flex flex-col"><div class="pb-4 text-lg font-semibold"></div><input type="checkbox" class="toggle"></div><div class="flex flex-col"><div class="pb-4 text-lg font-semibold"></div><input type="checkbox" class="toggle"></div><div><div class="pb-4 text-lg font-semibold"></div><input class="toggle" type="checkbox"></div><div><div class="pb-4 text-lg font-semibold"></div><select class="select select-bordered w-full max-w-xs"></select></div><div><div class="pb-4 text-lg font-semibold"></div><select class="select select-bordered w-full max-w-xs"></select></div><div><div class="pb-4 text-lg font-semibold"></div><select class="select select-bordered w-full max-w-xs"></select></div><div></div><div>'),G=g("<option>"),Oe=g('<option class="flex items-center gap-2">'),Ne=g('<div class="flex flex-col gap-4"><kbd class="kbd">'),De=p.object({name:p.string(),type:p.string()}),je=()=>{const[s]=B(),a=K(),{form:C,isSubmitting:w}=Z({extend:J({schema:De}),onSubmit:async o=>{a.get("dns/query",{searchParams:{name:o.name,type:o.type}}).json().then(({Answer:r})=>k((r==null?void 0:r.map(({data:v})=>v))||[]))}}),[h,k]=U([]);return(()=>{const o=Pe(),r=o.firstChild,v=r.firstChild,x=v.nextSibling;return x.firstChild,W(C,r,()=>C),e(x,n(I,{type:"submit",class:"btn-primary",get loading(){return w()},get children(){return s("dnsQuery")}}),null),e(o,n(Y,{get when(){return h().length>0},get children(){const m=Te();return e(m,n(y,{get each(){return h()},children:f=>(()=>{const _=Le();return e(_,f),_})()})),m}}),null),o})()},Ae=p.object({port:p.number(),"socks-port":p.number(),"redir-port":p.number(),"tproxy-port":p.number(),"mixed-port":p.number()}),Ge=()=>{const[s]=B(),a=K(),C=[{label:"Http Port",key:"port"},{label:"Socks Port",key:"socks-port"},{label:"Redir Port",key:"redir-port"},{label:"Tproxy Port",key:"tproxy-port"},{label:"Mixed Port",key:"mixed-port"}],{form:w,setInitialValues:h,reset:k}=Z({extend:J({schema:Ae})});ee(async()=>{const $=await a.get("configs").json();h($),k()});const[o,r]=U(!1),[v,x]=U(!1),[m,f]=U(!1),_=async()=>{r(!0);try{await a.post("configs/geo")}catch{}r(!1)},j=async()=>{x(!0);try{await a.post("upgrade")}catch{}x(!1)},R=async()=>{f(!0);try{await a.post("restart")}catch{}f(!1)};return(()=>{const $=Ie(),E=$.firstChild,S=E.nextSibling,F=S.nextSibling,T=F.firstChild,O=T.nextSibling,A=F.nextSibling,P=A.firstChild,N=P.nextSibling;return W(w,E,()=>w),e(E,n(y,{each:C,children:d=>(()=>{const L=Re(),D=L.firstChild,z=D.firstChild,t=D.nextSibling;return e(z,()=>d.label),c(l=>{const b=d.key,i=d.label;return b!==l._v$&&q(t,"name",l._v$=b),i!==l._v$2&&q(t,"placeholder",l._v$2=i),l},{_v$:void 0,_v$2:void 0}),L})()})),e(S,n(I,{get loading(){return o()},onClick:_,get children(){return s("updateGEODatabases")}}),null),e(S,n(I,{get loading(){return v()},onClick:j,get children(){return s("upgradeCore")}}),null),e(S,n(I,{get loading(){return m()},onClick:R,get children(){return s("restartCore")}}),null),e(T,()=>s("urlForLatencyTest")),O.addEventListener("change",d=>se(d.target.value)),e(P,()=>s("autoCloseConns")),N.addEventListener("change",d=>le(d.target.checked)),c(()=>O.value=ne()),c(()=>N.checked=ae()),$})()},Ue=()=>{const[s,{locale:a}]=B(),C=te(),w=()=>{ke(""),C(Ee.Setup)};return(()=>{const h=Fe(),k=h.firstChild,o=k.firstChild,r=o.nextSibling,v=k.nextSibling,x=v.firstChild,m=x.nextSibling,f=v.nextSibling,_=f.firstChild,j=_.nextSibling,R=f.nextSibling,$=R.firstChild,E=$.nextSibling,S=R.nextSibling,F=S.firstChild,T=F.nextSibling,O=S.nextSibling,A=O.firstChild,P=A.nextSibling,N=O.nextSibling,d=N.firstChild,L=d.nextSibling,D=N.nextSibling,z=D.nextSibling;return e(o,()=>s("renderInTwoColumns")),r.addEventListener("change",t=>{ie(t.target.checked)}),e(x,()=>s("renderProxiesInSamePage")),m.addEventListener("change",t=>{re(t.target.checked)}),e(_,()=>s("autoSwitchTheme")),j.addEventListener("change",t=>{ce(t.target.checked),M()}),e(h,n(Y,{get when(){return X()},get children(){return[(()=>{const t=V(),l=t.firstChild,b=l.nextSibling;return e(l,()=>s("favDayTheme")),b.addEventListener("change",i=>{oe(i.target.value),M()}),e(b,n(y,{each:H,children:i=>(()=>{const u=G();return u.value=i,e(u,i),c(()=>u.selected=de()===i),u})()})),t})(),(()=>{const t=V(),l=t.firstChild,b=l.nextSibling;return e(l,()=>s("favNightTheme")),b.addEventListener("change",i=>{ge(i.target.value),M()}),e(b,n(y,{each:H,children:i=>(()=>{const u=G();return u.value=i,e(u,i),c(()=>u.selected=ue()===i),u})()})),t})()]}}),R),e($,()=>s("useTwemoji")),E.addEventListener("change",t=>pe(t.target.checked)),e(F,()=>s("proxiesPreviewType")),T.addEventListener("change",t=>he(t.target.value)),e(T,n(y,{get each(){return Object.values(ve)},children:t=>(()=>{const l=G();return l.value=t,e(l,()=>s(t)),l})()})),e(A,()=>s("proxiesSorting")),P.addEventListener("change",t=>xe(t.target.value)),e(P,n(y,{get each(){return Object.values(be)},children:t=>(()=>{const l=Oe();return l.value=t,e(l,()=>s(t)),l})()})),e(d,()=>s("tableSize")),L.addEventListener("change",t=>me(t.target.value)),e(L,n(y,{get each(){return Object.values(fe)},children:t=>(()=>{const l=G();return l.value=t,e(l,()=>s(t)),l})()})),e(D,n(I,{onClick:()=>{const t=a();a(t===Q.EN?Q.ZH:Q.EN)},get children(){return s("switchLanguage")}})),e(z,n(I,{onClick:w,get children(){return s("switchEndpoint")}})),c(()=>r.checked=_e()),c(()=>m.checked=$e()),c(()=>j.checked=X()),c(()=>E.checked=Se()),c(()=>T.value=ye()),c(()=>P.value=Ce()),c(()=>L.value=we()),h})()},qe=()=>(()=>{const s=Ne(),a=s.firstChild;return e(s,n(je,{}),a),e(s,n(Ge,{}),a),e(s,n(Ue,{}),a),e(a,()=>"1.69.0"),s})();export{qe as default};
