import{c as v,p as G,i as l,b as x,W as q,F as h,r as S,Q as k,t as u,d as A}from"./vendor-acc7ec64.js";import{u as D}from"./index-b18d44d6.js";import{t as B}from"./tw-merge-1166cefb.js";function I(){const m=D(),[_,P]=v([]),[C,w]=v([]),[f,$]=v({}),y=async()=>{const{providers:n}=await m.get("providers/proxies").json(),i=f();Object.values(n).forEach(e=>{e.proxies.forEach(r=>{var g;i[r.name]=(g=r.history[r.history.length-1])==null?void 0:g.delay})}),$(i),w(Object.values(n).filter(e=>e.name!=="default"&&e.vehicleType!=="Compatible"));const{proxies:c}=await m.get("proxies").json(),s=c.GLOBAL.all??[];P(Object.values(c).filter(e=>e.all&&e.all.length>0).sort((e,r)=>s.indexOf(e.name)-s.indexOf(r.name)))};return{proxies:_,proxyProviders:C,delayTestByProxyGroupName:async n=>{const i=await m.get(`group/${n}/delay?url=https%3A%2F%2Fwww.gstatic.com%2Fgenerate_204&timeout=2000`).json(),c=f();Object.entries(i).forEach(([s,e])=>{c[s]=e}),$({...c})},delayMap:f,updateProxy:y,setProxiesByProxyName:async(n,i)=>{await m.put(`proxies/${n.name}`,{body:JSON.stringify({name:i})}),await y()}}}const L=u("<span>ms"),R=u('<div class="flex flex-col gap-4"><div><h1 class="pb-4 text-lg font-semibold">Proxies</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-1"></div></div><div><h1 class="pb-4 text-lg font-semibold">Proxy Providers</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-1">'),J=u('<div><div class="collapse-title flex items-center text-xl font-medium"> </div><div class="collapse-content grid grid-cols-1 gap-2 sm:grid-cols-3 lg:grid-cols-5">'),Q=u("<div> "),W=u('<div><div class="collapse-title text-xl font-medium"></div><div class="collapse-content grid grid-cols-1 gap-2 sm:grid-cols-3 lg:grid-cols-5">'),z=u('<div class="card card-bordered card-compact m-1 flex-row justify-between border-secondary p-4"> '),V=()=>{const{proxies:m,proxyProviders:_,delayMap:P,updateProxy:C,setProxiesByProxyName:w,delayTestByProxyGroupName:f}=I(),[$,y]=v({}),j=s=>{const e=P()[s];return typeof e!="number"||e===0?"":(()=>{const r=L(),g=r.firstChild;return l(r,e,g),r})()};G(async()=>{await C()});const O=async(s,e)=>{w(s,e)},n=s=>{const e=$();e[s]=!e[s],y({...e})},i=(s,e)=>{s.stopPropagation(),f(e)},c=s=>$()[s]?"collapse-open":"collapse-close";return(()=>{const s=R(),e=s.firstChild,r=e.firstChild,g=r.nextSibling,N=e.nextSibling,T=N.firstChild,E=T.nextSibling;return l(g,x(h,{get each(){return m()},children:t=>(()=>{const p=J(),o=p.firstChild,M=o.firstChild,b=o.nextSibling;return o.$$click=()=>n(t.name),l(o,()=>t.name,M),l(o,()=>t.type,null),l(o,x(q,{class:"m-4 cursor-pointer",onClick:a=>i(a,t.name)}),null),l(b,x(h,{get each(){return t.all},children:a=>(()=>{const d=Q(),F=d.firstChild;return d.$$click=()=>O(t,a),l(d,a,F),l(d,()=>j(a),null),S(()=>k(d,B(t.now===a?"border-primary bg-success-content text-success":"border-secondary","card card-bordered card-compact m-1 cursor-pointer flex-row justify-between p-4"))),d})()})),S(()=>k(p,B(c(t.name),"collapse collapse-arrow border-secondary bg-base-200 p-4"))),p})()})),l(E,x(h,{get each(){return _()},children:t=>(()=>{const p=W(),o=p.firstChild,M=o.nextSibling;return o.$$click=()=>n(t.name),l(o,()=>t.name),l(M,x(h,{get each(){return t.proxies},children:b=>(()=>{const a=z(),d=a.firstChild;return l(a,()=>b.name,d),l(a,()=>j(b.name),null),a})()})),S(()=>k(p,B(c(t.name),"collapse-arrow collapse border-secondary bg-base-200 p-4"))),p})()})),s})()};A(["click"]);export{V as default};
