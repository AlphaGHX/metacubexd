import{i as M,f as lt,t as et,g as Q,d as rt,h as E,c as nt,L as pt,s as vt,v as gt,b as A,a3 as st,F as X,a4 as yt,S as xt}from"./vendor-c5e716b7.js";import{u as bt}from"./index-5512492f.js";const _t=E('<div><div class="collapse-title text-xl font-medium"></div><div>'),wt=m=>{const{title:H,content:b,onCollapse:S}=m,T=()=>{const y="collapse-open",u="collapse-close";return m.isOpen?y:u},C=()=>{const y="opacity-100",u="opacity-0";return m.isOpen?y:u};return(()=>{const y=_t(),u=y.firstChild,a=u.nextSibling;return u.$$click=()=>S(!m.isOpen),M(u,H),M(a,b),lt(s=>{const d=et(T(),"collapse collapse-arrow overflow-visible border-secondary bg-base-200"),f=et(C(),"collapse-content grid auto-rows-min grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4");return d!==s._v$&&Q(y,s._v$=d),f!==s._v$2&&Q(a,s._v$2=f),s},{_v$:void 0,_v$2:void 0}),y})()},it=wt;rt(["click"]);const[Mt,St]=nt([]),[Ct,Dt]=nt([]),[tt,at]=nt({});function ut(){const m=bt(),H=u=>{u.forEach(a=>{var s;at({...tt(),[a.name]:{udp:a.udp,type:a.type,delay:((s=a.history.at(-1))==null?void 0:s.delay)??0,name:a.name}})})},b=async()=>{const{providers:u}=await m.get("providers/proxies").json();Object.values(u).forEach(d=>{H(d.proxies)}),Dt(Object.values(u).filter(d=>d.name!=="default"&&d.vehicleType!=="Compatible"));const{proxies:a}=await m.get("proxies").json(),s=[...a.GLOBAL.all??[],"GLOBAL"];H(Object.values(a)),St(Object.values(a).filter(d=>{var f;return(f=d.all)==null?void 0:f.length}).sort((d,f)=>s.indexOf(d.name)-s.indexOf(f.name)))};return{proxies:Mt,proxyProviders:Ct,delayTestByProxyGroupName:async u=>{const a=await m.get(`group/${u}/delay?url=https%3A%2F%2Fwww.gstatic.com%2Fgenerate_204&timeout=2000`).json();Object.entries(a).forEach(([s,d])=>{at({...tt(),[s]:{...tt()[s],delay:d}})})},proxyNodeMap:tt,updateProxy:b,setProxyGroupByProxyName:async(u,a)=>{await m.put(`proxies/${u.name}`,{body:JSON.stringify({name:a})}),await b()},updateProviderByProviderName:async u=>{await m.put(`providers/proxies/${u}`),await b()},healthCheckByProviderName:async u=>{await m.get(`providers/proxies/${u}/healthcheck`,{timeout:30*1e3}),await b()}}}const Ot=E("<span>ms"),Nt=E('<div><div class="truncate text-left"></div><div class="flex items-center justify-between gap-1"><div></div><div class="text-xs">'),ot=m=>{const{proxyName:H,isSelected:b,onClick:S}=m,{proxyNodeMap:T}=ut(),C=pt(()=>T()[H]),y=a=>{if(typeof a!="number"||a===0)return"";let s="text-green-500";return a>500?s="text-red-500":a>200&&(s="text-yellow-500"),(()=>{const d=Ot(),f=d.firstChild;return Q(d,s),M(d,a,f),d})()},u=(a="")=>{const s=a.toLowerCase();return s.includes("shadowsocks")?s.replace("shadowsocks","ss"):s};return(()=>{const a=Nt(),s=a.firstChild,d=s.nextSibling,f=d.firstChild,F=f.nextSibling;return a.$$click=()=>S==null?void 0:S(),vt(a,"data-tip",H),M(s,H),M(f,()=>{var o;return u((o=C())==null?void 0:o.type)},null),M(f,()=>{var o;return((o=C())==null?void 0:o.udp)&&" :: udp"},null),M(F,()=>{var o;return y((o=C())==null?void 0:o.delay)}),lt(o=>{const v=et("card card-bordered tooltip tooltip-bottom card-compact flex gap-1 border-neutral-focus bg-neutral p-3 text-neutral-content",b&&"border-primary bg-primary-content text-primary",S&&"cursor-pointer"),_=et("truncate text-xs text-slate-500",b&&"text-primary");return v!==o._v$&&Q(a,o._v$=v),_!==o._v$2&&Q(f,o._v$2=_),o},{_v$:void 0,_v$2:void 0}),a})()};rt(["click"]);var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ft(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var ht={exports:{}};(function(m,H){(function(b,S){m.exports=S()})(dt,function(){var b=1e3,S=6e4,T=36e5,C="millisecond",y="second",u="minute",a="hour",s="day",d="week",f="month",F="quarter",o="year",v="date",_="Invalid Date",U=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,O=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(i){var n=["th","st","nd","rd"],t=i%100;return"["+i+(n[(t-20)%10]||n[t]||n[0])+"]"}},I=function(i,n,t){var r=String(i);return!r||r.length>=n?i:""+Array(n+1-r.length).join(t)+i},D={s:I,z:function(i){var n=-i.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+I(r,2,"0")+":"+I(e,2,"0")},m:function i(n,t){if(n.date()<t.date())return-i(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(r,f),c=t-e<0,l=n.clone().add(r+(c?-1:1),f);return+(-(r+(t-e)/(c?e-l:l-e))||0)},a:function(i){return i<0?Math.ceil(i)||0:Math.floor(i)},p:function(i){return{M:f,y:o,w:d,d:s,D:v,h:a,m:u,s:y,ms:C,Q:F}[i]||String(i||"").toLowerCase().replace(/s$/,"")},u:function(i){return i===void 0}},$="en",x={};x[$]=P;var L=function(i){return i instanceof G},j=function i(n,t,r){var e;if(!n)return $;if(typeof n=="string"){var c=n.toLowerCase();x[c]&&(e=c),t&&(x[c]=t,e=c);var l=n.split("-");if(!e&&l.length>1)return i(l[0])}else{var p=n.name;x[p]=n,e=p}return!r&&e&&($=e),e||!r&&$},g=function(i,n){if(L(i))return i.clone();var t=typeof n=="object"?n:{};return t.date=i,t.args=arguments,new G(t)},h=D;h.l=j,h.i=L,h.w=function(i,n){return g(i,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var G=function(){function i(t){this.$L=j(t.locale,null,!0),this.parse(t)}var n=i.prototype;return n.parse=function(t){this.$d=function(r){var e=r.date,c=r.utc;if(e===null)return new Date(NaN);if(h.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var l=e.match(U);if(l){var p=l[2]-1||0,w=(l[7]||"0").substring(0,3);return c?new Date(Date.UTC(l[1],p,l[3]||1,l[4]||0,l[5]||0,l[6]||0,w)):new Date(l[1],p,l[3]||1,l[4]||0,l[5]||0,l[6]||0,w)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return h},n.isValid=function(){return this.$d.toString()!==_},n.isSame=function(t,r){var e=g(t);return this.startOf(r)<=e&&e<=this.endOf(r)},n.isAfter=function(t,r){return g(t)<this.startOf(r)},n.isBefore=function(t,r){return this.endOf(r)<g(t)},n.$g=function(t,r,e){return h.u(t)?this[r]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,r){var e=this,c=!!h.u(r)||r,l=h.p(t),p=function(Z,B){var W=h.w(e.$u?Date.UTC(e.$y,B,Z):new Date(e.$y,B,Z),e);return c?W:W.endOf(s)},w=function(Z,B){return h.w(e.toDate()[Z].apply(e.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(B)),e)},N=this.$W,k=this.$M,Y=this.$D,q="set"+(this.$u?"UTC":"");switch(l){case o:return c?p(1,0):p(31,11);case f:return c?p(1,k):p(0,k+1);case d:var J=this.$locale().weekStart||0,R=(N<J?N+7:N)-J;return p(c?Y-R:Y+(6-R),k);case s:case v:return w(q+"Hours",0);case a:return w(q+"Minutes",1);case u:return w(q+"Seconds",2);case y:return w(q+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,r){var e,c=h.p(t),l="set"+(this.$u?"UTC":""),p=(e={},e[s]=l+"Date",e[v]=l+"Date",e[f]=l+"Month",e[o]=l+"FullYear",e[a]=l+"Hours",e[u]=l+"Minutes",e[y]=l+"Seconds",e[C]=l+"Milliseconds",e)[c],w=c===s?this.$D+(r-this.$W):r;if(c===f||c===o){var N=this.clone().set(v,1);N.$d[p](w),N.init(),this.$d=N.set(v,Math.min(this.$D,N.daysInMonth())).$d}else p&&this.$d[p](w);return this.init(),this},n.set=function(t,r){return this.clone().$set(t,r)},n.get=function(t){return this[h.p(t)]()},n.add=function(t,r){var e,c=this;t=Number(t);var l=h.p(r),p=function(k){var Y=g(c);return h.w(Y.date(Y.date()+Math.round(k*t)),c)};if(l===f)return this.set(f,this.$M+t);if(l===o)return this.set(o,this.$y+t);if(l===s)return p(1);if(l===d)return p(7);var w=(e={},e[u]=S,e[a]=T,e[y]=b,e)[l]||1,N=this.$d.getTime()+t*w;return h.w(N,this)},n.subtract=function(t,r){return this.add(-1*t,r)},n.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||_;var c=t||"YYYY-MM-DDTHH:mm:ssZ",l=h.z(this),p=this.$H,w=this.$m,N=this.$M,k=e.weekdays,Y=e.months,q=e.meridiem,J=function(B,W,V,K){return B&&(B[W]||B(r,c))||V[W].slice(0,K)},R=function(B){return h.s(p%12||12,B,"0")},Z=q||function(B,W,V){var K=B<12?"AM":"PM";return V?K.toLowerCase():K};return c.replace(O,function(B,W){return W||function(V){switch(V){case"YY":return String(r.$y).slice(-2);case"YYYY":return h.s(r.$y,4,"0");case"M":return N+1;case"MM":return h.s(N+1,2,"0");case"MMM":return J(e.monthsShort,N,Y,3);case"MMMM":return J(Y,N);case"D":return r.$D;case"DD":return h.s(r.$D,2,"0");case"d":return String(r.$W);case"dd":return J(e.weekdaysMin,r.$W,k,2);case"ddd":return J(e.weekdaysShort,r.$W,k,3);case"dddd":return k[r.$W];case"H":return String(p);case"HH":return h.s(p,2,"0");case"h":return R(1);case"hh":return R(2);case"a":return Z(p,w,!0);case"A":return Z(p,w,!1);case"m":return String(w);case"mm":return h.s(w,2,"0");case"s":return String(r.$s);case"ss":return h.s(r.$s,2,"0");case"SSS":return h.s(r.$ms,3,"0");case"Z":return l}return null}(B)||l.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,r,e){var c,l=this,p=h.p(r),w=g(t),N=(w.utcOffset()-this.utcOffset())*S,k=this-w,Y=function(){return h.m(l,w)};switch(p){case o:c=Y()/12;break;case f:c=Y();break;case F:c=Y()/3;break;case d:c=(k-N)/6048e5;break;case s:c=(k-N)/864e5;break;case a:c=k/T;break;case u:c=k/S;break;case y:c=k/b;break;default:c=k}return e?c:h.a(c)},n.daysInMonth=function(){return this.endOf(f).$D},n.$locale=function(){return x[this.$L]},n.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),c=j(t,r,!0);return c&&(e.$L=c),e},n.clone=function(){return h.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},i}(),z=G.prototype;return g.prototype=z,[["$ms",C],["$s",y],["$m",u],["$H",a],["$W",s],["$M",f],["$y",o],["$D",v]].forEach(function(i){z[i[1]]=function(n){return this.$g(n,i[0],i[1])}}),g.extend=function(i,n){return i.$i||(i(n,G,g),i.$i=!0),g},g.locale=j,g.isDayjs=L,g.unix=function(i){return g(1e3*i)},g.en=x[$],g.Ls=x,g.p={},g})})(ht);var Pt=ht.exports;const mt=ft(Pt);var $t={exports:{}};(function(m,H){(function(b,S){m.exports=S()})(dt,function(){return function(b,S,T){b=b||{};var C=S.prototype,y={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(s,d,f,F){return C.fromToBase(s,d,f,F)}T.en.relativeTime=y,C.fromToBase=function(s,d,f,F,o){for(var v,_,U,O=f.$locale().relativeTime||y,P=b.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],I=P.length,D=0;D<I;D+=1){var $=P[D];$.d&&(v=F?T(s).diff(f,$.d,!0):f.diff(s,$.d,!0));var x=(b.rounding||Math.round)(Math.abs(v));if(U=v>0,x<=$.r||!$.r){x<=1&&D>0&&($=P[D-1]);var L=O[$.l];o&&(x=o(""+x)),_=typeof L=="string"?L.replace("%d",x):L(x,d,$.l,U);break}}if(d)return _;var j=U?O.future:O.past;return typeof j=="function"?j(_):j.replace("%s",_)},C.to=function(s,d){return u(s,d,this,!0)},C.from=function(s,d){return u(s,d,this)};var a=function(s){return s.$u?T.utc():T()};C.toNow=function(s){return this.to(a(this),s)},C.fromNow=function(s){return this.from(a(this),s)}}})})($t);var kt=$t.exports;const Tt=ft(kt);mt.extend(Tt);function Lt(m){return mt(m).fromNow()}const jt=E('<h1 class="pb-4 text-lg font-semibold">Proxy Providers'),Bt=E('<div class="grid grid-cols-1 gap-2 sm:grid-cols-2">'),Ht=E('<div class="flex flex-col gap-4"><div><h1 class="pb-4 text-lg font-semibold">Proxies</h1><div class="grid grid-cols-1 gap-2 sm:grid-cols-2">'),Yt=E('<div class="flex items-center justify-between"><div class="flex flex-col"><span></span><div class="text-sm text-slate-500"> :: </div></div><button class="btn btn-circle btn-sm">'),ct=E("<div>"),At=E('<div class="flex items-center justify-between"><div class="flex flex-col"><span></span><div class="text-sm text-slate-500"> :: Updated </div></div><div><button class="btn btn-circle btn-sm mr-2"></button><button class="btn btn-circle btn-sm">'),Et=()=>{const{proxies:m,proxyProviders:H,updateProxy:b,setProxyGroupByProxyName:S,delayTestByProxyGroupName:T,updateProviderByProviderName:C,healthCheckByProviderName:y}=ut(),[u,a]=nt({});gt(async()=>{await b()});const s=async(o,v)=>{S(o,v)},d=async(o,v)=>{const _=o.target;_.classList.add("animate-pulse"),o.stopPropagation(),await T(v),_.classList.remove("animate-pulse")},f=async(o,v)=>{const _=o.target;_.classList.add("animate-pulse"),o.stopPropagation(),await y(v),_.classList.remove("animate-pulse")},F=async(o,v)=>{const _=o.target;_.classList.add("animate-spin"),o.stopPropagation(),await C(v),_.classList.remove("animate-spin")};return(()=>{const o=Ht(),v=o.firstChild,_=v.firstChild,U=_.nextSibling;return M(U,A(X,{get each(){return m()},children:O=>{const P=(()=>{const D=Yt(),$=D.firstChild,x=$.firstChild,L=x.nextSibling,j=L.firstChild,g=$.nextSibling;return M(x,()=>O.name),M(L,()=>O.type,j),M(L,()=>O.now,null),g.$$click=h=>d(h,O.name),M(g,A(st,{})),D})(),I=A(X,{get each(){return O.all},children:D=>A(ot,{proxyName:D,get isSelected(){return O.now===D},onClick:()=>s(O,D)})});return(()=>{const D=ct();return M(D,A(it,{get isOpen(){return u()[`group-${O.name}`]},title:P,content:I,onCollapse:$=>a({...u(),[`group-${O.name}`]:$})})),D})()}})),M(o,A(xt,{get when(){return H().length>0},get children(){return[jt(),(()=>{const O=Bt();return M(O,A(X,{get each(){return H()},children:P=>{const I=(()=>{const $=At(),x=$.firstChild,L=x.firstChild,j=L.nextSibling,g=j.firstChild,h=x.nextSibling,G=h.firstChild,z=G.nextSibling;return M(L,()=>P.name),M(j,()=>P.vehicleType,g),M(j,()=>Lt(P.updatedAt),null),G.$$click=i=>F(i,P.name),M(G,A(yt,{})),z.$$click=i=>f(i,P.name),M(z,A(st,{})),$})(),D=A(X,{get each(){return P.proxies},children:$=>A(ot,{get proxyName(){return $.name}})});return(()=>{const $=ct();return M($,A(it,{get isOpen(){return u()[`provider-${P.name}`]},title:I,content:D,onCollapse:x=>a({...u(),[`provider-${P.name}`]:x})})),$})()}})),O})()]}}),null),o})()};rt(["click"]);export{Et as default};
