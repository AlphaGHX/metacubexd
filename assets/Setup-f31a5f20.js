import{a as $,k as U,z as S,i as p,b as g,B as _,F as k,t as x,d as E}from"./vendor-acc7ec64.js";import{c as I,v as D,z as u}from"./index-d034cd98.js";import{s as y,e as m,a as b}from"./index-a273bb98.js";let l;const R=new Uint8Array(16);function f(){if(!l&&(l=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(R)}const n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function C(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}const V=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v={randomUUID:V};function j(t,e,s){if(v.randomUUID&&!e&&!t)return v.randomUUID();t=t||{};const o=t.random||(t.rng||f)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){s=s||0;for(let i=0;i<16;++i)e[s+i]=o[i];return e}return C(o)}const z=x('<div class="mx-auto flex flex-col items-center gap-4 py-10 sm:w-2/3"><form class="contents"><div class="flex w-full flex-col gap-4"><input name="url" type="url" class="input input-bordered" placeholder="http://127.0.0.1:9000" list="defaultEndpoints"><datalist id="defaultEndpoints"><option value="http://127.0.0.1:9000"></option></datalist><input name="secret" type="password" autocomplete="new-password" class="input input-bordered" placeholder="secret"><button type="submit" class="btn btn-primary join-item uppercase">Add</button></div></form><div class="flex w-full flex-col gap-4">'),A=x('<div class="badge badge-info flex w-full cursor-pointer items-center gap-4 py-4"><button class="btn btn-circle btn-ghost btn-xs text-white">'),F=u.object({url:u.string().url().nonempty(),secret:u.string()}),N=()=>{const t=$(),{form:e}=I({extend:D({schema:F}),async onSubmit({url:o,secret:i}){const{ok:c}=await U.get(o,{headers:i?{Authorization:`Bearer ${i}`}:{}});if(!c)return 1;const a=j();y([{id:a,url:o,secret:i},...m()]),b(a),t("/overview")}}),s=o=>y(m().filter(i=>i.id!==o));return(()=>{const o=z(),i=o.firstChild,c=i.nextSibling;return S(e,i,()=>e),p(c,g(k,{get each(){return m()},children:({id:a,url:h})=>(()=>{const r=A(),d=r.firstChild;return r.$$click=()=>{b(a),t("/overview")},p(r,h,d),d.$$click=w=>{w.stopPropagation(),s(a)},p(d,g(_,{})),r})()})),o})()};E(["click"]);export{N as default};
