import{l as P,i as l,o as d,u as N,c as y,g as c,a9 as _,a8 as E,S as T,d as U}from"./vendor-01afc7ba.js";import{P as D,a as F,C as M,F as Y}from"./ProxyNodePreview-ee0f46c8.js";import{b as h}from"./index-ac54fc13.js";import{d as A,f as B}from"./proxies-c53981d7.js";import{d as j}from"./index-8a8a2bbe.js";import"./index-02de5b64.js";const I=d('<progress class="progress" max="100">'),R=d('<div class="text-sm text-slate-500"> / <!> ( <!>% )'),z=d('<div class="text-sm text-slate-500">Expire: <!> '),G=e=>{const i=h(e.Total,{units:"iec"}),t=h(e.Download+e.Upload,{units:"iec"}),m=((e.Download+e.Upload)/e.Total*100).toFixed(2);return{total:i,used:t,percentage:m,expireStr:()=>e.Expire===0?"Null":A(e.Expire*1e3).format("YYYY-MM-DD")}},H=e=>{if(!e.subscriptionInfo)return;const i=G(e.subscriptionInfo);return[(()=>{const t=I();return P(()=>t.value=i.percentage),t})(),(()=>{const t=R(),m=t.firstChild,p=m.nextSibling,u=p.nextSibling,$=u.nextSibling;return $.nextSibling,l(t,()=>`${i.used}`,m),l(t,()=>`${i.total}`,p),l(t,()=>i.percentage,$),t})(),(()=>{const t=z(),m=t.firstChild,p=m.nextSibling;return p.nextSibling,l(t,()=>i.expireStr(),p),t})()]},O=d('<div class="flex flex-col gap-2"><h1 class="flex h-8 items-center pb-2 text-lg font-semibold"><button class="btn btn-circle btn-ghost btn-sm ml-2">'),q=d('<div class="mr-8 flex items-center justify-between"><span></span><div><button class="btn btn-circle btn-sm mr-2"></button><button class="btn btn-circle btn-sm">'),J=d('<div class="text-sm text-slate-500"> :: Updated '),tt=()=>{const[e]=N(),{proxyProviders:i,updateProviderByProviderName:t,updateAllProvider:m,healthCheckByProviderName:p}=j(),[u,$]=y({}),C=async(a,r)=>{const o=a.target;o.classList.add("animate-pulse"),a.stopPropagation(),await p(r),o.classList.remove("animate-pulse")},S=async(a,r)=>{const o=a.target;o.classList.add("animate-spin"),a.stopPropagation(),await t(r),o.classList.remove("animate-spin")},v=async a=>{const r=a.target;r.classList.add("animate-spin"),a.stopPropagation(),await m(),r.classList.remove("animate-spin")};return(()=>{const a=O(),r=a.firstChild,o=r.firstChild;return l(r,()=>e("proxyProviders"),o),o.$$click=s=>v(s),l(o,c(_,{})),l(a,c(Y,{get subChild(){return i().map(s=>{const w=[(()=>{const n=q(),g=n.firstChild,L=g.nextSibling,x=L.firstChild,f=x.nextSibling;return l(g,()=>s.name),x.$$click=b=>S(b,s.name),l(x,c(_,{})),f.$$click=b=>C(b,s.name),l(f,c(E,{})),n})(),c(H,{get subscriptionInfo(){return s.subscriptionInfo}}),(()=>{const n=J(),g=n.firstChild;return l(n,()=>s.vehicleType,g),l(n,()=>B(s.updatedAt),null),n})(),c(T,{get when(){return!u()[`provider-${s.name}`]},get children(){return c(D,{get proxyNameList(){return s.proxies.map(n=>n.name)??[]}})}})],k=c(F,{get proxies(){return s.proxies.map(n=>n.name)}});return c(M,{get isOpen(){return u()[`provider-${s.name}`]},title:w,content:k,onCollapse:n=>$({...u(),[`provider-${s.name}`]:n})})})}}),null),a})()};U(["click"]);export{tt as default};
