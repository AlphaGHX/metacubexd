import{m as g,c as m,k as ie,d as le,u as q,a as ce,b as de,e as z,i as h,f as t,I as ue,A as V,F as E,S as Q,g as pe,h as me,j as L,l as he,t as ge,n as P,s as k,o as fe,p as ve,q as ye,r as we,v as xe,w as be,x as _e,y as Pe,z as Z,B as Ce,R as y,N as Se,C as Te,D as x,E as $e,G as De,H as Ie,J as Ne,K as Ee}from"./vendor-a57136fc.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function a(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(s){if(s.ep)return;s.ep=!0;const n=a(s);fetch(s.href,n)}})();const Le="modulepreload",Oe=function(e,o){return new URL(e,o).href},G={},b=function(o,a,d){if(!a||a.length===0)return o();const s=document.getElementsByTagName("link");return Promise.all(a.map(n=>{if(n=Oe(n,d),n in G)return;G[n]=!0;const c=n.endsWith(".css"),v=c?'[rel="stylesheet"]':"";if(!!d)for(let u=s.length-1;u>=0;u--){const l=s[u];if(l.href===n&&(!c||l.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${v}`))return;const r=document.createElement("link");if(r.rel=c?"stylesheet":Le,c||(r.as="script",r.crossOrigin=""),r.href=n,document.head.appendChild(r),c)return new Promise((u,l)=>{r.addEventListener("load",u),r.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>o()).catch(n=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n})};var p=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Proxyprovider="/proxyprovider",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e))(p||{}),J=(e=>(e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.Source="source",e.Destination="destination",e))(J||{}),ke=(e=>(e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(ke||{}),W=(e=>(e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(W||{}),_=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(_||{});const Re=Object.values(J),bt={...Object.fromEntries(Re.map(e=>[e,!0])),ID:!1},Be=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"],Me=()=>{const e=T();return ie.create({prefixUrl:e==null?void 0:e.url,headers:{Authorization:e!=null&&e.secret?`Bearer ${e.secret}`:""}})},[S,Ge]=g(m(""),{name:"selectedEndpoint",storage:localStorage}),[Ue,_t]=g(m([]),{name:"endpointList",storage:localStorage}),[Fe,O]=g(m("halloween"),{name:"theme",storage:localStorage}),T=()=>Ue().find(({id:e})=>e===S()),Pt=()=>{var e;return(e=T())==null?void 0:e.secret},Ct=()=>{var e;return(e=T())==null?void 0:e.url.replace("http","ws")},[St,Tt]=g(m(W.BAR),{name:"proxiesPreviewType",storage:localStorage}),[je,$t]=g(m("https://www.gstatic.com/generate_204"),{name:"urlForDelayTest",storage:localStorage}),[Ae,Dt]=g(m(!1),{name:"autoCloseConns",storage:localStorage}),[He,It]=g(m(!1),{name:"autoSwitchTheme",storage:localStorage}),[qe,Nt]=g(m("light"),{name:"favDayTheme",storage:localStorage}),[ze,Et]=g(m("night"),{name:"favNightTheme",storage:localStorage}),[Lt,Ot]=g(m(!0),{name:"renderInTwoColumn",storage:localStorage}),X=e=>{He()&&O(e?ze():qe())};function Ve(){X(window.matchMedia("(prefers-color-scheme: dark)").matches)}function Qe(){Ve(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{X(e.matches)})}const[U,F]=m([]),[j,Ze]=m([]),[N,A]=m({}),[H,Je]=m({});function Y(){const e=Me(),o=i=>{i.forEach(r=>{var l;const u=((l=r.history.at(-1))==null?void 0:l.delay)??0;Je({...H(),[r.name]:{udp:r.udp,type:r.type,name:r.name}}),A({...N(),[r.name]:u})})},a=async()=>{const{providers:i}=await e.get("providers/proxies").json();Object.values(i).forEach(l=>{o(l.proxies)}),Ze(Object.values(i).filter(l=>l.name!=="default"&&l.vehicleType!=="Compatible"));const{proxies:r}=await e.get("proxies").json(),u=[...r.GLOBAL.all??[],"GLOBAL"];o(Object.values(r)),F(Object.values(r).filter(l=>{var f;return(f=l.all)==null?void 0:f.length}).sort((l,f)=>u.indexOf(l.name)-u.indexOf(f.name)))};return{proxies:U,proxyProviders:j,delayTestByProxyGroupName:async i=>{const r=await e.get(`group/${i}/delay`,{searchParams:{url:je(),timeout:2e3}}).json();A({...N(),...r})},delayMap:N,proxyNodeMap:H,updateProxy:a,setProxyGroupByProxyName:async(i,r)=>{const u=U().slice(),l=u.find(f=>f.name===i.name);Ae()&&e.delete("connections"),await e.put(`proxies/${i.name}`,{body:JSON.stringify({name:r})}),l.now=r,F(u)},updateProviderByProviderName:async i=>{try{await e.put(`providers/proxies/${i}`)}catch{}await a()},updateAllProvider:async()=>{await Promise.all(j().map(i=>e.put(`providers/proxies/${i.name}`))),await a()},healthCheckByProviderName:async i=>{await e.get(`providers/proxies/${i}/healthcheck`,{timeout:30*1e3}),await a()}}}const We=P('<li class="tooltip tooltip-bottom">'),Xe=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id="themes" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="themes" class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side"><label for="themes" class="drawer-overlay"></label><ul class="menu rounded-l-box gap-2 bg-base-300 p-2 shadow">'),Ye=P('<li class="btn btn-xs">'),Ke=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal gap-2">'),et=P('<ul class="navbar rounded-box sticky inset-x-0 top-2 z-10 mx-2 mt-2 flex w-auto items-center justify-center bg-base-300 px-4"><div class="navbar-start gap-4"><div><input id="navs" type="checkbox" class="drawer-toggle"><div class="drawer-content flex items-center"><label for="navs" class="btn btn-circle drawer-button btn-sm"></label></div><div class="drawer-side"><label for="navs" class="drawer-overlay"></label><ul class="menu rounded-r-box min-h-full w-2/5 gap-2 bg-base-300 pt-20 shadow"></ul></div></div><a class="text-xl font-bold normal-case" href="https://github.com/metacubex/metacubexd" target="_blank">metacubexd</a></div><div class="navbar-end"><div class="flex items-center gap-2"><button class="btn btn-circle btn-sm"></button><button class="btn btn-circle btn-secondary btn-sm">'),tt=P("<li>"),rt=({href:e,tooltip:o,children:a})=>(()=>{const d=We();return k(d,"data-tip",o),h(d,t(V,{class:"rounded-box",href:e,children:a})),d})(),ot=()=>(()=>{const e=Xe(),o=e.firstChild,a=o.nextSibling,d=a.firstChild,s=a.nextSibling,n=s.firstChild,c=n.nextSibling;return h(d,t(fe,{})),h(c,t(E,{each:Be,children:v=>(()=>{const i=Ye();return i.$$click=()=>O(v),k(i,"data-theme",v),h(i,v),i})()})),e})(),nt=()=>{const[e,{locale:o}]=q(),{proxyProviders:a}=Y(),d=ce(()=>{const r=[{href:p.Overview,name:e("overview"),icon:t(ve,{})},{href:p.Proxies,name:e("proxies"),icon:t(ye,{})},{href:p.Rules,name:e("rules"),icon:t(we,{})},{href:p.Conns,name:e("connections"),icon:t(xe,{})},{href:p.Log,name:e("logs"),icon:t(be,{})},{href:p.Config,name:e("config"),icon:t(_e,{})}];return a().length>0&&r.splice(2,0,{href:p.Proxyprovider,name:e("proxyProviders"),icon:t(Pe,{})}),r}),s=de(),n=z(),[c,v]=m(!1),i=()=>{Ge(""),n("/setup")};return(()=>{const r=et(),u=r.firstChild,l=u.firstChild,f=l.firstChild,R=f.nextSibling,te=R.firstChild,re=R.nextSibling,oe=re.firstChild,ne=oe.nextSibling,B=u.nextSibling,M=B.firstChild,$=M.firstChild,D=$.nextSibling;return f.addEventListener("change",w=>v(w.target.checked)),h(te,t(ue,{})),h(ne,t(E,{get each(){return d()},children:({href:w,name:I})=>(()=>{const C=tt();return C.$$click=()=>v(!1),h(C,t(V,{href:w,children:I})),C})()})),h(r,t(Q,{get when(){return s.pathname!=="/setup"},get children(){const w=Ke(),I=w.firstChild;return h(I,t(E,{get each(){return d()},children:({href:C,name:ae,icon:se})=>t(rt,{href:C,tooltip:ae,children:se})})),w}}),B),$.$$click=()=>{const w=o();o(w===_.EN?_.ZH:_.EN)},h($,t(pe,{})),h(M,t(ot,{}),D),D.$$click=i,h(D,t(me,{})),L(()=>he(l,ge("drawer w-auto lg:hidden",""))),L(()=>f.checked=c()),r})()};le(["click"]);const at=P('<div class="relative flex h-screen flex-col subpixel-antialiased"><div class="flex-1 overflow-y-auto overflow-x-hidden p-2 sm:p-4">'),st=x(()=>b(()=>import("./Setup-fd96724b.js"),["./Setup-fd96724b.js","./vendor-a57136fc.js","./index-c1f24b95.js"],import.meta.url)),it=x(()=>b(()=>import("./Overview-992bbebc.js"),["./Overview-992bbebc.js","./vendor-a57136fc.js","./index-9e0d1ea5.js","./index-ac54fc13.js"],import.meta.url)),lt=x(()=>b(()=>import("./Connections-8c989295.js"),["./Connections-8c989295.js","./vendor-a57136fc.js","./index-9e0d1ea5.js","./index-d9cb5a44.js","./index-ac54fc13.js"],import.meta.url)),ct=x(()=>b(()=>import("./Logs-99a56230.js"),["./Logs-99a56230.js","./vendor-a57136fc.js","./index-9e0d1ea5.js","./index-d9cb5a44.js"],import.meta.url)),dt=x(()=>b(()=>import("./Proxies-9f29122b.js"),["./Proxies-9f29122b.js","./vendor-a57136fc.js","./ProxyNodePreview-ca6677bb.js","./proxies-3d382bf3.js"],import.meta.url)),ut=x(()=>b(()=>import("./ProxyProvider-dd22d86f.js"),["./ProxyProvider-dd22d86f.js","./vendor-a57136fc.js","./ProxyNodePreview-ca6677bb.js","./proxies-3d382bf3.js","./index-ac54fc13.js"],import.meta.url)),pt=x(()=>b(()=>import("./Rules-eea9461d.js"),["./Rules-eea9461d.js","./vendor-a57136fc.js","./proxies-3d382bf3.js"],import.meta.url)),mt=x(()=>b(()=>import("./Config-adf3ab30.js"),["./Config-adf3ab30.js","./vendor-a57136fc.js","./index-c1f24b95.js"],import.meta.url)),ht=()=>{const e=z();return Qe(),Z(()=>{S()&&T()&&Y().updateProxy()}),Ce(async()=>{S()||e("/setup")}),(()=>{const o=at(),a=o.firstChild;return h(o,t(nt,{}),a),h(a,t(Te,{get children(){return[t(Q,{get when(){return S()},get children(){return[t(y,{get path(){return p.Overview},component:it}),t(y,{get path(){return p.Proxies},component:dt}),t(y,{get path(){return p.Proxyprovider},component:ut}),t(y,{get path(){return p.Rules},component:pt}),t(y,{get path(){return p.Conns},component:lt}),t(y,{get path(){return p.Log},component:ct}),t(y,{get path(){return p.Config},component:mt}),t(y,{path:"*",get element(){return t(Se,{get href(){return p.Overview}})}})]}}),t(y,{path:"/setup",component:st})]}})),L(()=>k(o,"data-theme",Fe())),o})()},gt={add:"Add",overview:"Overview",proxies:"Proxies",rules:"Rules",connections:"Connections",logs:"Logs",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",chains:"Chains",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",source:"Source",destination:"Destination",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",proxiesPreviewType:"Proxies preview type",urlForDelayTest:"Url for delay test",autoCloseConns:"Automatically close all connections",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render Proxies in two columns",updateGEODatabases:"Update GEO Databases",restartCore:"Restart Core",upgradeCore:"Upgrade Core"},ft={add:"添加",overview:"概览",proxies:"代理",rules:"规则",connections:"连接",logs:"日志",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",chains:"链路",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",source:"源地址",destination:"目标地址",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",proxiesPreviewType:"节点组预览样式",urlForDelayTest:"测速链接",autoCloseConns:"切换代理时自动断开全部连接",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"节点双列渲染",updateGEODatabases:"更新 GEO 数据库文件",restartCore:"重启核心",upgradeCore:"更新核心"},K={[_.EN]:gt,[_.ZH]:ft},ee=()=>{const[e,o]=g(m(Reflect.has(K,navigator.language)?navigator.language:_.EN),{name:"lang",storage:localStorage});return{lang:e,setLang:o}},vt=e=>{const{setLang:o}=ee(),[a,{locale:d}]=q();return Z(()=>{o(d())}),e.children},yt=e=>{const{lang:o}=ee(),a=$e(K,o());return t(De.Provider,{value:a,get children(){return t(vt,{get children(){return e.children}})}})},wt=document.getElementById("root");Ie(()=>t(yt,{get children(){return t(Ne,{get source(){return Ee()},get children(){return t(ht,{})}})}}),wt);export{J as A,ke as D,W as P,Ge as a,Pt as b,bt as c,Y as d,Ue as e,Ot as f,It as g,Ve as h,Re as i,He as j,Nt as k,qe as l,Et as m,ze as n,Tt as o,St as p,Dt as q,Lt as r,_t as s,Be as t,Me as u,$t as v,Ct as w,Ae as x,je as y};
